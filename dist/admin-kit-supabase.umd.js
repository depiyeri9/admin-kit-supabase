(function(Y,R){typeof exports=="object"&&typeof module<"u"?R(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],R):(Y=typeof globalThis<"u"?globalThis:Y||self,R(Y.AdminKitSupabase={},Y.React))})(this,function(Y,R){"use strict";var ia=Y=>{throw TypeError(Y)};var Bs=(Y,R,he)=>R.has(Y)||ia("Cannot "+he);var b=(Y,R,he)=>(Bs(Y,R,"read from private field"),he?he.call(Y):R.get(Y)),W=(Y,R,he)=>R.has(Y)?ia("Cannot add the same private member more than once"):R instanceof WeakSet?R.add(Y):R.set(Y,he),D=(Y,R,he,g)=>(Bs(Y,R,"write to private field"),g?g.call(Y,he):R.set(Y,he),he),Z=(Y,R,he)=>(Bs(Y,R,"access private method"),he);var nt,Be,St,Fi,Ct,ze,Tt,Ui,me,M,sr,ue,it,Nt,Ve,We,nr,Pt,Rt,at,ot,Ge,Ot,z,lr,zs,Vs,Ws,Gs,Hs,Ks,Js,aa,Mi,He,Ke,pe,Re,Oe,Dr,Qs,qi;function he(r){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(r){for(const t in r)if(t!=="default"){const s=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,s.get?s:{enumerable:!0,get:()=>r[t]})}}return e.default=r,Object.freeze(e)}const g=he(R);function Ys(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function oa(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var n=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(t,s,n.get?n:{enumerable:!0,get:function(){return r[s]}})}),t}var cr={exports:{}},It={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xs;function la(){if(Xs)return It;Xs=1;var r=R,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,n=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,u){var c,h={},m=null,p=null;u!==void 0&&(m=""+u),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(p=l.ref);for(c in l)s.call(l,c)&&!i.hasOwnProperty(c)&&(h[c]=l[c]);if(o&&o.defaultProps)for(c in l=o.defaultProps,l)h[c]===void 0&&(h[c]=l[c]);return{$$typeof:e,type:o,key:m,ref:p,props:h,_owner:n.current}}return It.Fragment=t,It.jsx=a,It.jsxs=a,It}var Dt={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zs;function ca(){return Zs||(Zs=1,process.env.NODE_ENV!=="production"&&function(){var r=R,e=Symbol.for("react.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),y=Symbol.iterator,x="@@iterator";function v(f){if(f===null||typeof f!="object")return null;var w=y&&f[y]||f[x];return typeof w=="function"?w:null}var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function S(f){{for(var w=arguments.length,C=new Array(w>1?w-1:0),O=1;O<w;O++)C[O-1]=arguments[O];j("error",f,C)}}function j(f,w,C){{var O=k.ReactDebugCurrentFrame,V=O.getStackAddendum();V!==""&&(w+="%s",C=C.concat([V]));var K=C.map(function(q){return String(q)});K.unshift("Warning: "+w),Function.prototype.apply.call(console[f],console,K)}}var T=!1,I=!1,ee=!1,oe=!1,N=!1,_;_=Symbol.for("react.module.reference");function P(f){return!!(typeof f=="string"||typeof f=="function"||f===s||f===i||N||f===n||f===u||f===c||oe||f===p||T||I||ee||typeof f=="object"&&f!==null&&(f.$$typeof===m||f.$$typeof===h||f.$$typeof===a||f.$$typeof===o||f.$$typeof===l||f.$$typeof===_||f.getModuleId!==void 0))}function H(f,w,C){var O=f.displayName;if(O)return O;var V=w.displayName||w.name||"";return V!==""?C+"("+V+")":C}function E(f){return f.displayName||"Context"}function Q(f){if(f==null)return null;if(typeof f.tag=="number"&&S("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case s:return"Fragment";case t:return"Portal";case i:return"Profiler";case n:return"StrictMode";case u:return"Suspense";case c:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case o:var w=f;return E(w)+".Consumer";case a:var C=f;return E(C._context)+".Provider";case l:return H(f,f.render,"ForwardRef");case h:var O=f.displayName||null;return O!==null?O:Q(f.type)||"Memo";case m:{var V=f,K=V._payload,q=V._init;try{return Q(q(K))}catch{return null}}}return null}var ge=Object.assign,Je=0,lt,ir,At,Qe,ar,we,Bi;function zi(){}zi.__reactDisabledLog=!0;function gd(){{if(Je===0){lt=console.log,ir=console.info,At=console.warn,Qe=console.error,ar=console.group,we=console.groupCollapsed,Bi=console.groupEnd;var f={configurable:!0,enumerable:!0,value:zi,writable:!0};Object.defineProperties(console,{info:f,log:f,warn:f,error:f,group:f,groupCollapsed:f,groupEnd:f})}Je++}}function vd(){{if(Je--,Je===0){var f={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:ge({},f,{value:lt}),info:ge({},f,{value:ir}),warn:ge({},f,{value:At}),error:ge({},f,{value:Qe}),group:ge({},f,{value:ar}),groupCollapsed:ge({},f,{value:we}),groupEnd:ge({},f,{value:Bi})})}Je<0&&S("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Ls=k.ReactCurrentDispatcher,$s;function Ar(f,w,C){{if($s===void 0)try{throw Error()}catch(V){var O=V.stack.trim().match(/\n( *(at )?)/);$s=O&&O[1]||""}return`
`+$s+f}}var Is=!1,Lr;{var yd=typeof WeakMap=="function"?WeakMap:Map;Lr=new yd}function Vi(f,w){if(!f||Is)return"";{var C=Lr.get(f);if(C!==void 0)return C}var O;Is=!0;var V=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var K;K=Ls.current,Ls.current=null,gd();try{if(w){var q=function(){throw Error()};if(Object.defineProperty(q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(q,[])}catch(ve){O=ve}Reflect.construct(f,[],q)}else{try{q.call()}catch(ve){O=ve}f.call(q.prototype)}}else{try{throw Error()}catch(ve){O=ve}f()}}catch(ve){if(ve&&O&&typeof ve.stack=="string"){for(var U=ve.stack.split(`
`),de=O.stack.split(`
`),te=U.length-1,se=de.length-1;te>=1&&se>=0&&U[te]!==de[se];)se--;for(;te>=1&&se>=0;te--,se--)if(U[te]!==de[se]){if(te!==1||se!==1)do if(te--,se--,se<0||U[te]!==de[se]){var xe=`
`+U[te].replace(" at new "," at ");return f.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",f.displayName)),typeof f=="function"&&Lr.set(f,xe),xe}while(te>=1&&se>=0);break}}}finally{Is=!1,Ls.current=K,vd(),Error.prepareStackTrace=V}var $t=f?f.displayName||f.name:"",ct=$t?Ar($t):"";return typeof f=="function"&&Lr.set(f,ct),ct}function bd(f,w,C){return Vi(f,!1)}function wd(f){var w=f.prototype;return!!(w&&w.isReactComponent)}function $r(f,w,C){if(f==null)return"";if(typeof f=="function")return Vi(f,wd(f));if(typeof f=="string")return Ar(f);switch(f){case u:return Ar("Suspense");case c:return Ar("SuspenseList")}if(typeof f=="object")switch(f.$$typeof){case l:return bd(f.render);case h:return $r(f.type,w,C);case m:{var O=f,V=O._payload,K=O._init;try{return $r(K(V),w,C)}catch{}}}return""}var or=Object.prototype.hasOwnProperty,Wi={},Gi=k.ReactDebugCurrentFrame;function Ir(f){if(f){var w=f._owner,C=$r(f.type,f._source,w?w.type:null);Gi.setExtraStackFrame(C)}else Gi.setExtraStackFrame(null)}function xd(f,w,C,O,V){{var K=Function.call.bind(or);for(var q in f)if(K(f,q)){var U=void 0;try{if(typeof f[q]!="function"){var de=Error((O||"React class")+": "+C+" type `"+q+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof f[q]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw de.name="Invariant Violation",de}U=f[q](w,q,O,C,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(te){U=te}U&&!(U instanceof Error)&&(Ir(V),S("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",O||"React class",C,q,typeof U),Ir(null)),U instanceof Error&&!(U.message in Wi)&&(Wi[U.message]=!0,Ir(V),S("Failed %s type: %s",C,U.message),Ir(null))}}}var _d=Array.isArray;function Ds(f){return _d(f)}function jd(f){{var w=typeof Symbol=="function"&&Symbol.toStringTag,C=w&&f[Symbol.toStringTag]||f.constructor.name||"Object";return C}}function kd(f){try{return Hi(f),!1}catch{return!0}}function Hi(f){return""+f}function Ki(f){if(kd(f))return S("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",jd(f)),Hi(f)}var Ji=k.ReactCurrentOwner,Ed={key:!0,ref:!0,__self:!0,__source:!0},Qi,Yi;function Sd(f){if(or.call(f,"ref")){var w=Object.getOwnPropertyDescriptor(f,"ref").get;if(w&&w.isReactWarning)return!1}return f.ref!==void 0}function Cd(f){if(or.call(f,"key")){var w=Object.getOwnPropertyDescriptor(f,"key").get;if(w&&w.isReactWarning)return!1}return f.key!==void 0}function Td(f,w){typeof f.ref=="string"&&Ji.current}function Nd(f,w){{var C=function(){Qi||(Qi=!0,S("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",w))};C.isReactWarning=!0,Object.defineProperty(f,"key",{get:C,configurable:!0})}}function Pd(f,w){{var C=function(){Yi||(Yi=!0,S("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",w))};C.isReactWarning=!0,Object.defineProperty(f,"ref",{get:C,configurable:!0})}}var Rd=function(f,w,C,O,V,K,q){var U={$$typeof:e,type:f,key:w,ref:C,props:q,_owner:K};return U._store={},Object.defineProperty(U._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(U,"_self",{configurable:!1,enumerable:!1,writable:!1,value:O}),Object.defineProperty(U,"_source",{configurable:!1,enumerable:!1,writable:!1,value:V}),Object.freeze&&(Object.freeze(U.props),Object.freeze(U)),U};function Od(f,w,C,O,V){{var K,q={},U=null,de=null;C!==void 0&&(Ki(C),U=""+C),Cd(w)&&(Ki(w.key),U=""+w.key),Sd(w)&&(de=w.ref,Td(w,V));for(K in w)or.call(w,K)&&!Ed.hasOwnProperty(K)&&(q[K]=w[K]);if(f&&f.defaultProps){var te=f.defaultProps;for(K in te)q[K]===void 0&&(q[K]=te[K])}if(U||de){var se=typeof f=="function"?f.displayName||f.name||"Unknown":f;U&&Nd(q,se),de&&Pd(q,se)}return Rd(f,U,de,V,O,Ji.current,q)}}var Fs=k.ReactCurrentOwner,Xi=k.ReactDebugCurrentFrame;function Lt(f){if(f){var w=f._owner,C=$r(f.type,f._source,w?w.type:null);Xi.setExtraStackFrame(C)}else Xi.setExtraStackFrame(null)}var Us;Us=!1;function Ms(f){return typeof f=="object"&&f!==null&&f.$$typeof===e}function Zi(){{if(Fs.current){var f=Q(Fs.current.type);if(f)return`

Check the render method of \``+f+"`."}return""}}function Ad(f){return""}var ea={};function Ld(f){{var w=Zi();if(!w){var C=typeof f=="string"?f:f.displayName||f.name;C&&(w=`

Check the top-level render call using <`+C+">.")}return w}}function ta(f,w){{if(!f._store||f._store.validated||f.key!=null)return;f._store.validated=!0;var C=Ld(w);if(ea[C])return;ea[C]=!0;var O="";f&&f._owner&&f._owner!==Fs.current&&(O=" It was passed a child from "+Q(f._owner.type)+"."),Lt(f),S('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',C,O),Lt(null)}}function ra(f,w){{if(typeof f!="object")return;if(Ds(f))for(var C=0;C<f.length;C++){var O=f[C];Ms(O)&&ta(O,w)}else if(Ms(f))f._store&&(f._store.validated=!0);else if(f){var V=v(f);if(typeof V=="function"&&V!==f.entries)for(var K=V.call(f),q;!(q=K.next()).done;)Ms(q.value)&&ta(q.value,w)}}}function $d(f){{var w=f.type;if(w==null||typeof w=="string")return;var C;if(typeof w=="function")C=w.propTypes;else if(typeof w=="object"&&(w.$$typeof===l||w.$$typeof===h))C=w.propTypes;else return;if(C){var O=Q(w);xd(C,f.props,"prop",O,f)}else if(w.PropTypes!==void 0&&!Us){Us=!0;var V=Q(w);S("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",V||"Unknown")}typeof w.getDefaultProps=="function"&&!w.getDefaultProps.isReactClassApproved&&S("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Id(f){{for(var w=Object.keys(f.props),C=0;C<w.length;C++){var O=w[C];if(O!=="children"&&O!=="key"){Lt(f),S("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",O),Lt(null);break}}f.ref!==null&&(Lt(f),S("Invalid attribute `ref` supplied to `React.Fragment`."),Lt(null))}}var sa={};function na(f,w,C,O,V,K){{var q=P(f);if(!q){var U="";(f===void 0||typeof f=="object"&&f!==null&&Object.keys(f).length===0)&&(U+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var de=Ad();de?U+=de:U+=Zi();var te;f===null?te="null":Ds(f)?te="array":f!==void 0&&f.$$typeof===e?(te="<"+(Q(f.type)||"Unknown")+" />",U=" Did you accidentally export a JSX literal instead of a component?"):te=typeof f,S("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",te,U)}var se=Od(f,w,C,V,K);if(se==null)return se;if(q){var xe=w.children;if(xe!==void 0)if(O)if(Ds(xe)){for(var $t=0;$t<xe.length;$t++)ra(xe[$t],f);Object.freeze&&Object.freeze(xe)}else S("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else ra(xe,f)}if(or.call(w,"key")){var ct=Q(f),ve=Object.keys(w).filter(function(Bd){return Bd!=="key"}),qs=ve.length>0?"{key: someKey, "+ve.join(": ..., ")+": ...}":"{key: someKey}";if(!sa[ct+qs]){var qd=ve.length>0?"{"+ve.join(": ..., ")+": ...}":"{}";S(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,qs,ct,qd,ct),sa[ct+qs]=!0}}return f===s?Id(se):$d(se),se}}function Dd(f,w,C){return na(f,w,C,!0)}function Fd(f,w,C){return na(f,w,C,!1)}var Ud=Fd,Md=Dd;Dt.Fragment=s,Dt.jsx=Ud,Dt.jsxs=Md}()),Dt}var en;function ua(){return en||(en=1,process.env.NODE_ENV==="production"?cr.exports=la():cr.exports=ca()),cr.exports}var d=ua();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fr(){return Fr=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Fr.apply(this,arguments)}var Ur;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ur||(Ur={}));function $(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ke(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Mr(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ur(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}var tn;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(tn||(tn={}));function da(r,e,t){return t===void 0&&(t="/"),ha(r,e,t)}function ha(r,e,t,s){let n=typeof e=="string"?ur(e):e,i=Ye(n.pathname||"/",t);if(i==null)return null;let a=rn(r);fa(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=ka(i);o=_a(a[l],u)}return o}function rn(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let n=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&($(l.relativePath.startsWith(s),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(s.length));let u=Te([s,l.relativePath]),c=t.concat(l);i.children&&i.children.length>0&&($(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),rn(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:wa(u,i.index),routesMeta:c})};return r.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))n(i,a);else for(let l of sn(i.path))n(i,a,l)}),e}function sn(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,n=t.endsWith("?"),i=t.replace(/\?$/,"");if(s.length===0)return n?[i,""]:[i];let a=sn(s.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),n&&o.push(...a),o.map(l=>r.startsWith("/")&&l===""?"/":l)}function fa(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:xa(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const ma=/^:[\w-]+$/,pa=3,ga=2,va=1,ya=10,ba=-2,nn=r=>r==="*";function wa(r,e){let t=r.split("/"),s=t.length;return t.some(nn)&&(s+=ba),e&&(s+=ga),t.filter(n=>!nn(n)).reduce((n,i)=>n+(ma.test(i)?pa:i===""?va:ya),s)}function xa(r,e){return r.length===e.length&&r.slice(0,-1).every((s,n)=>s===e[n])?r[r.length-1]-e[e.length-1]:0}function _a(r,e,t){let{routesMeta:s}=r,n={},i="/",a=[];for(let o=0;o<s.length;++o){let l=s[o],u=o===s.length-1,c=i==="/"?e:e.slice(i.length)||"/",h=qr({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),m=l.route;if(!h)return null;Object.assign(n,h.params),a.push({params:n,pathname:Te([i,h.pathname]),pathnameBase:Ta(Te([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=Te([i,h.pathnameBase]))}return a}function qr(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=ja(r.path,r.caseSensitive,r.end),n=e.match(t);if(!n)return null;let i=n[0],a=i.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:s.reduce((u,c,h)=>{let{paramName:m,isOptional:p}=c;if(m==="*"){let x=o[h]||"";a=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const y=o[h];return p&&!y?u[m]=void 0:u[m]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:r}}function ja(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),ke(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],n="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(s.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),n+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":r!==""&&r!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),s]}function ka(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ke(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function Ye(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function Ea(r,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:n=""}=typeof r=="string"?ur(r):r;return{pathname:t?t.startsWith("/")?t:Sa(t,e):e,search:Na(s),hash:Pa(n)}}function Sa(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function Br(r,e,t,s){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ca(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function zr(r,e){let t=Ca(r);return e?t.map((s,n)=>n===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Vr(r,e,t,s){s===void 0&&(s=!1);let n;typeof r=="string"?n=ur(r):(n=Fr({},r),$(!n.pathname||!n.pathname.includes("?"),Br("?","pathname","search",n)),$(!n.pathname||!n.pathname.includes("#"),Br("#","pathname","hash",n)),$(!n.search||!n.search.includes("#"),Br("#","search","hash",n)));let i=r===""||n.pathname==="",a=i?"/":n.pathname,o;if(a==null)o=t;else{let h=e.length-1;if(!s&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;n.pathname=m.join("/")}o=h>=0?e[h]:"/"}let l=Ea(n,o),u=a&&a!=="/"&&a.endsWith("/"),c=(i||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Te=r=>r.join("/").replace(/\/\/+/g,"/"),Ta=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Na=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Pa=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Ra(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const an=["post","put","patch","delete"];new Set(an);const Oa=["get",...an];new Set(Oa);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dr(){return dr=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},dr.apply(this,arguments)}const Ft=g.createContext(null);process.env.NODE_ENV!=="production"&&(Ft.displayName="DataRouter");const Wr=g.createContext(null);process.env.NODE_ENV!=="production"&&(Wr.displayName="DataRouterState");const Aa=g.createContext(null);process.env.NODE_ENV!=="production"&&(Aa.displayName="Await");const _e=g.createContext(null);process.env.NODE_ENV!=="production"&&(_e.displayName="Navigation");const hr=g.createContext(null);process.env.NODE_ENV!=="production"&&(hr.displayName="Location");const Ee=g.createContext({outlet:null,matches:[],isDataRoute:!1});process.env.NODE_ENV!=="production"&&(Ee.displayName="Route");const Gr=g.createContext(null);process.env.NODE_ENV!=="production"&&(Gr.displayName="RouteError");function La(r,e){let{relative:t}=e===void 0?{}:e;Ut()||(process.env.NODE_ENV!=="production"?$(!1,"useHref() may be used only in the context of a <Router> component."):$(!1));let{basename:s,navigator:n}=g.useContext(_e),{hash:i,pathname:a,search:o}=Mt(r,{relative:t}),l=a;return s!=="/"&&(l=a==="/"?s:Te([s,a])),n.createHref({pathname:l,search:o,hash:i})}function Ut(){return g.useContext(hr)!=null}function Ae(){return Ut()||(process.env.NODE_ENV!=="production"?$(!1,"useLocation() may be used only in the context of a <Router> component."):$(!1)),g.useContext(hr).location}const on="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ln(r){g.useContext(_e).static||g.useLayoutEffect(r)}function fr(){let{isDataRoute:r}=g.useContext(Ee);return r?Ka():$a()}function $a(){Ut()||(process.env.NODE_ENV!=="production"?$(!1,"useNavigate() may be used only in the context of a <Router> component."):$(!1));let r=g.useContext(Ft),{basename:e,future:t,navigator:s}=g.useContext(_e),{matches:n}=g.useContext(Ee),{pathname:i}=Ae(),a=JSON.stringify(zr(n,t.v7_relativeSplatPath)),o=g.useRef(!1);return ln(()=>{o.current=!0}),g.useCallback(function(u,c){if(c===void 0&&(c={}),process.env.NODE_ENV!=="production"&&ke(o.current,on),!o.current)return;if(typeof u=="number"){s.go(u);return}let h=Vr(u,JSON.parse(a),i,c.relative==="path");r==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Te([e,h.pathname])),(c.replace?s.replace:s.push)(h,c.state,c)},[e,s,a,i,r])}function Mt(r,e){let{relative:t}=e===void 0?{}:e,{future:s}=g.useContext(_e),{matches:n}=g.useContext(Ee),{pathname:i}=Ae(),a=JSON.stringify(zr(n,s.v7_relativeSplatPath));return g.useMemo(()=>Vr(r,JSON.parse(a),i,t==="path"),[r,a,i,t])}function Ia(r,e){return Da(r,e)}function Da(r,e,t,s){Ut()||(process.env.NODE_ENV!=="production"?$(!1,"useRoutes() may be used only in the context of a <Router> component."):$(!1));let{navigator:n,static:i}=g.useContext(_e),{matches:a}=g.useContext(Ee),o=a[a.length-1],l=o?o.params:{},u=o?o.pathname:"/",c=o?o.pathnameBase:"/",h=o&&o.route;if(process.env.NODE_ENV!=="production"){let j=h&&h.path||"";dn(u,!h||j.endsWith("*"),"You rendered descendant <Routes> (or called `useRoutes()`) at "+('"'+u+'" (under <Route path="'+j+'">) but the ')+`parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

`+('Please change the parent <Route path="'+j+'"> to <Route ')+('path="'+(j==="/"?"*":j+"/*")+'">.'))}let m=Ae(),p;if(e){var y;let j=typeof e=="string"?ur(e):e;c==="/"||(y=j.pathname)!=null&&y.startsWith(c)||(process.env.NODE_ENV!=="production"?$(!1,"When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was "+('matched by all parent routes. The current pathname base is "'+c+'" ')+('but pathname "'+j.pathname+'" was given in the `location` prop.')):$(!1)),p=j}else p=m;let x=p.pathname||"/",v=x;if(c!=="/"){let j=c.replace(/^\//,"").split("/");v="/"+x.replace(/^\//,"").split("/").slice(j.length).join("/")}let k=da(r,{pathname:v});process.env.NODE_ENV!=="production"&&(process.env.NODE_ENV!=="production"&&ke(h||k!=null,'No routes matched location "'+p.pathname+p.search+p.hash+'" '),process.env.NODE_ENV!=="production"&&ke(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,'Matched leaf route at location "'+p.pathname+p.search+p.hash+'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let S=Ba(k&&k.map(j=>Object.assign({},j,{params:Object.assign({},l,j.params),pathname:Te([c,n.encodeLocation?n.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:Te([c,n.encodeLocation?n.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),a,t,s);return e&&S?g.createElement(hr.Provider,{value:{location:dr({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Ur.Pop}},S):S}function Fa(){let r=Ha(),e=Ra(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},a=null;return process.env.NODE_ENV!=="production"&&(console.error("Error handled by React Router default ErrorBoundary:",r),a=g.createElement(g.Fragment,null,g.createElement("p",null,"💿 Hey developer 👋"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:i},"ErrorBoundary")," or"," ",g.createElement("code",{style:i},"errorElement")," prop on your route."))),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),t?g.createElement("pre",{style:n},t):null,a)}const Ua=g.createElement(Fa,null);class Ma extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?g.createElement(Ee.Provider,{value:this.props.routeContext},g.createElement(Gr.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qa(r){let{routeContext:e,match:t,children:s}=r,n=g.useContext(Ft);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(Ee.Provider,{value:e},s)}function Ba(r,e,t,s){var n;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var i;if(!t)return null;if(t.errors)r=t.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let a=r,o=(n=t)==null?void 0:n.errors;if(o!=null){let c=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);c>=0||(process.env.NODE_ENV!=="production"?$(!1,"Could not find a matching route for errors on route IDs: "+Object.keys(o).join(",")):$(!1)),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(t&&s&&s.v7_partialHydration)for(let c=0;c<a.length;c++){let h=a[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:m,errors:p}=t,y=h.route.loader&&m[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||y){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,h,m)=>{let p,y=!1,x=null,v=null;t&&(p=o&&h.route.id?o[h.route.id]:void 0,x=h.route.errorElement||Ua,l&&(u<0&&m===0?(dn("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):u===m&&(y=!0,v=h.route.hydrateFallbackElement||null)));let k=e.concat(a.slice(0,m+1)),S=()=>{let j;return p?j=x:y?j=v:h.route.Component?j=g.createElement(h.route.Component,null):h.route.element?j=h.route.element:j=c,g.createElement(qa,{match:h,routeContext:{outlet:c,matches:k,isDataRoute:t!=null},children:j})};return t&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?g.createElement(Ma,{location:t.location,revalidation:t.revalidation,component:x,error:p,children:S(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):S()},null)}var cn=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(cn||{}),qt=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(qt||{});function Hr(r){return r+" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router."}function za(r){let e=g.useContext(Ft);return e||(process.env.NODE_ENV!=="production"?$(!1,Hr(r)):$(!1)),e}function Va(r){let e=g.useContext(Wr);return e||(process.env.NODE_ENV!=="production"?$(!1,Hr(r)):$(!1)),e}function Wa(r){let e=g.useContext(Ee);return e||(process.env.NODE_ENV!=="production"?$(!1,Hr(r)):$(!1)),e}function Kr(r){let e=Wa(r),t=e.matches[e.matches.length-1];return t.route.id||(process.env.NODE_ENV!=="production"?$(!1,r+' can only be used on routes that contain a unique "id"'):$(!1)),t.route.id}function Ga(){return Kr(qt.UseRouteId)}function Ha(){var r;let e=g.useContext(Gr),t=Va(qt.UseRouteError),s=Kr(qt.UseRouteError);return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function Ka(){let{router:r}=za(cn.UseNavigateStable),e=Kr(qt.UseNavigateStable),t=g.useRef(!1);return ln(()=>{t.current=!0}),g.useCallback(function(n,i){i===void 0&&(i={}),process.env.NODE_ENV!=="production"&&ke(t.current,on),t.current&&(typeof n=="number"?r.navigate(n):r.navigate(n,dr({fromRouteId:e},i)))},[r,e])}const un={};function dn(r,e,t){!e&&!un[r]&&(un[r]=!0,process.env.NODE_ENV!=="production"&&ke(!1,t))}function Ja(r){let{to:e,replace:t,state:s,relative:n}=r;Ut()||(process.env.NODE_ENV!=="production"?$(!1,"<Navigate> may be used only in the context of a <Router> component."):$(!1));let{future:i,static:a}=g.useContext(_e);process.env.NODE_ENV!=="production"&&ke(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=g.useContext(Ee),{pathname:l}=Ae(),u=fr(),c=Vr(e,zr(o,i.v7_relativeSplatPath),l,n==="path"),h=JSON.stringify(c);return g.useEffect(()=>u(JSON.parse(h),{replace:t,state:s,relative:n}),[u,h,n,t,s]),null}function Xe(r){process.env.NODE_ENV!=="production"?$(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>."):$(!1)}function Qa(r){let{children:e,location:t}=r;return Ia(Jr(e),t)}new Promise(()=>{});function Jr(r,e){e===void 0&&(e=[]);let t=[];return g.Children.forEach(r,(s,n)=>{if(!g.isValidElement(s))return;let i=[...e,n];if(s.type===g.Fragment){t.push.apply(t,Jr(s.props.children,i));return}s.type!==Xe&&(process.env.NODE_ENV!=="production"?$(!1,"["+(typeof s.type=="string"?s.type:s.type.name)+"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>"):$(!1)),!s.props.index||!s.props.children||(process.env.NODE_ENV!=="production"?$(!1,"An index route cannot have child routes."):$(!1));let a={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=Jr(s.props.children,i)),t.push(a)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ut(){return ut=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},ut.apply(this,arguments)}function Qr(r,e){if(r==null)return{};var t={},s=Object.keys(r),n,i;for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&(t[n]=r[n]);return t}const mr="get",pr="application/x-www-form-urlencoded";function gr(r){return r!=null&&typeof r.tagName=="string"}function Ya(r){return gr(r)&&r.tagName.toLowerCase()==="button"}function Xa(r){return gr(r)&&r.tagName.toLowerCase()==="form"}function Za(r){return gr(r)&&r.tagName.toLowerCase()==="input"}function eo(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function to(r,e){return r.button===0&&(!e||e==="_self")&&!eo(r)}let vr=null;function ro(){if(vr===null)try{new FormData(document.createElement("form"),0),vr=!1}catch{vr=!0}return vr}const so=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yr(r){return r!=null&&!so.has(r)?(process.env.NODE_ENV!=="production"&&ke(!1,'"'+r+'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` '+('and will default to "'+pr+'"')),null):r}function no(r,e){let t,s,n,i,a;if(Xa(r)){let o=r.getAttribute("action");s=o?Ye(o,e):null,t=r.getAttribute("method")||mr,n=Yr(r.getAttribute("enctype"))||pr,i=new FormData(r)}else if(Ya(r)||Za(r)&&(r.type==="submit"||r.type==="image")){let o=r.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=r.getAttribute("formaction")||o.getAttribute("action");if(s=l?Ye(l,e):null,t=r.getAttribute("formmethod")||o.getAttribute("method")||mr,n=Yr(r.getAttribute("formenctype"))||Yr(o.getAttribute("enctype"))||pr,i=new FormData(o,r),!ro()){let{name:u,type:c,value:h}=r;if(c==="image"){let m=u?u+".":"";i.append(m+"x","0"),i.append(m+"y","0")}else u&&i.append(u,h)}}else{if(gr(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=mr,s=null,n=pr,a=r}return i&&n==="text/plain"&&(a=i,i=void 0),{action:s,method:t.toLowerCase(),encType:n,formData:i,body:a}}const io=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ao=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],oo=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"],lo="6";try{window.__reactRouterVersion=lo}catch{}const hn=g.createContext({isTransitioning:!1});process.env.NODE_ENV!=="production"&&(hn.displayName="ViewTransition");const co=g.createContext(new Map);process.env.NODE_ENV!=="production"&&(co.displayName="Fetchers"),process.env.NODE_ENV;const uo=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ho=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ze=g.forwardRef(function(e,t){let{onClick:s,relative:n,reloadDocument:i,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:h}=e,m=Qr(e,io),{basename:p}=g.useContext(_e),y,x=!1;if(typeof u=="string"&&ho.test(u)&&(y=u,uo))try{let j=new URL(window.location.href),T=u.startsWith("//")?new URL(j.protocol+u):new URL(u),I=Ye(T.pathname,p);T.origin===j.origin&&I!=null?u=I+T.search+T.hash:x=!0}catch{process.env.NODE_ENV!=="production"&&ke(!1,'<Link to="'+u+'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.')}let v=La(u,{relative:n}),k=go(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:n,viewTransition:h});function S(j){s&&s(j),j.defaultPrevented||k(j)}return g.createElement("a",ut({},m,{href:y||v,onClick:x||i?s:S,ref:t,target:l}))});process.env.NODE_ENV!=="production"&&(Ze.displayName="Link");const fo=g.forwardRef(function(e,t){let{"aria-current":s="page",caseSensitive:n=!1,className:i="",end:a=!1,style:o,to:l,viewTransition:u,children:c}=e,h=Qr(e,ao),m=Mt(l,{relative:h.relative}),p=Ae(),y=g.useContext(Wr),{navigator:x,basename:v}=g.useContext(_e),k=y!=null&&_o(m)&&u===!0,S=x.encodeLocation?x.encodeLocation(m).pathname:m.pathname,j=p.pathname,T=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(j=j.toLowerCase(),T=T?T.toLowerCase():null,S=S.toLowerCase()),T&&v&&(T=Ye(T,v)||T);const I=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let ee=j===S||!a&&j.startsWith(S)&&j.charAt(I)==="/",oe=T!=null&&(T===S||!a&&T.startsWith(S)&&T.charAt(S.length)==="/"),N={isActive:ee,isPending:oe,isTransitioning:k},_=ee?s:void 0,P;typeof i=="function"?P=i(N):P=[i,ee?"active":null,oe?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let H=typeof o=="function"?o(N):o;return g.createElement(Ze,ut({},h,{"aria-current":_,className:P,ref:t,style:H,to:l,viewTransition:u}),typeof c=="function"?c(N):c)});process.env.NODE_ENV!=="production"&&(fo.displayName="NavLink");const mo=g.forwardRef((r,e)=>{let{fetcherKey:t,navigate:s,reloadDocument:n,replace:i,state:a,method:o=mr,action:l,onSubmit:u,relative:c,preventScrollReset:h,viewTransition:m}=r,p=Qr(r,oo),y=wo(),x=xo(l,{relative:c}),v=o.toLowerCase()==="get"?"get":"post",k=S=>{if(u&&u(S),S.defaultPrevented)return;S.preventDefault();let j=S.nativeEvent.submitter,T=(j==null?void 0:j.getAttribute("formmethod"))||o;y(j||S.currentTarget,{fetcherKey:t,method:T,navigate:s,replace:i,state:a,relative:c,preventScrollReset:h,viewTransition:m})};return g.createElement("form",ut({ref:e,method:v,action:x,onSubmit:n?u:k},p))});process.env.NODE_ENV!=="production"&&(mo.displayName="Form"),process.env.NODE_ENV;var yr;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(yr||(yr={}));var fn;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(fn||(fn={}));function po(r){return r+" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router."}function mn(r){let e=g.useContext(Ft);return e||(process.env.NODE_ENV!=="production"?$(!1,po(r)):$(!1)),e}function go(r,e){let{target:t,replace:s,state:n,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,l=fr(),u=Ae(),c=Mt(r,{relative:a});return g.useCallback(h=>{if(to(h,t)){h.preventDefault();let m=s!==void 0?s:Mr(u)===Mr(c);l(r,{replace:m,state:n,preventScrollReset:i,relative:a,viewTransition:o})}},[u,l,c,s,n,t,r,i,a,o])}function vo(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}let yo=0,bo=()=>"__"+String(++yo)+"__";function wo(){let{router:r}=mn(yr.UseSubmit),{basename:e}=g.useContext(_e),t=Ga();return g.useCallback(function(s,n){n===void 0&&(n={}),vo();let{action:i,method:a,encType:o,formData:l,body:u}=no(s,e);if(n.navigate===!1){let c=n.fetcherKey||bo();r.fetch(c,t,n.action||i,{preventScrollReset:n.preventScrollReset,formData:l,body:u,formMethod:n.method||a,formEncType:n.encType||o,flushSync:n.flushSync})}else r.navigate(n.action||i,{preventScrollReset:n.preventScrollReset,formData:l,body:u,formMethod:n.method||a,formEncType:n.encType||o,replace:n.replace,state:n.state,fromRouteId:t,flushSync:n.flushSync,viewTransition:n.viewTransition})},[r,e,t])}function xo(r,e){let{relative:t}=e===void 0?{}:e,{basename:s}=g.useContext(_e),n=g.useContext(Ee);n||(process.env.NODE_ENV!=="production"?$(!1,"useFormAction must be used inside a RouteContext"):$(!1));let[i]=n.matches.slice(-1),a=ut({},Mt(r||".",{relative:t})),o=Ae();if(r==null){a.search=o.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(m=>m).forEach(m=>l.append("index",m));let h=l.toString();a.search=h?"?"+h:""}}return(!r||r===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(a.pathname=a.pathname==="/"?s:Te([s,a.pathname])),Mr(a)}function _o(r,e){e===void 0&&(e={});let t=g.useContext(hn);t==null&&(process.env.NODE_ENV!=="production"?$(!1,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?"):$(!1));let{basename:s}=mn(yr.useViewTransitionState),n=Mt(r,{relative:e.relative});if(!t.isTransitioning)return!1;let i=Ye(t.currentLocation.pathname,s)||t.currentLocation.pathname,a=Ye(t.nextLocation.pathname,s)||t.nextLocation.pathname;return qr(n.pathname,a)!=null||qr(n.pathname,i)!=null}const ce=async(r,e)=>{try{const{data:{user:t}}=await r.auth.getUser();if(!t)return{isAuthorized:!1,error:"Not authenticated"};const{data:s,error:n}=await r.from("projects").select("user_id").eq("id",e).single();if(n)return{isAuthorized:!1,error:"Project not found"};const i=s.user_id===t.id;return{isAuthorized:i,userId:t.id,error:i?void 0:"Not authorized for this project"}}catch{return{isAuthorized:!1,error:"Authorization check failed"}}},jo=(r,e)=>({getArticles:async()=>{try{const{data:c,error:h}=await r.from("articles").select("*").eq("project_id",e).eq("status","published").order("created_at",{ascending:!1});if(h)throw h;return{data:c,error:null}}catch(c){return{data:null,error:c}}},getArticleBySlug:async c=>{try{const{data:h,error:m}=await r.from("articles").select("*").eq("project_id",e).eq("slug",c).eq("status","published").single();if(m)throw m;return{data:h,error:null}}catch(h){return{data:null,error:h}}},getArticlesByCategory:async c=>{try{const{data:h,error:m}=await r.from("articles").select("*").eq("project_id",e).eq("category",c).eq("status","published").order("created_at",{ascending:!1});if(m)throw m;return{data:h,error:null}}catch(h){return{data:null,error:h}}},getAllArticles:async()=>{try{const c=await ce(r,e);if(!c.isAuthorized)return{data:null,error:c.error};const{data:h,error:m}=await r.from("articles").select("*").eq("project_id",e).order("created_at",{ascending:!1});if(m)throw m;return{data:h,error:null}}catch(c){return{data:null,error:c}}},createArticle:async c=>{try{const h=await ce(r,e);if(!h.isAuthorized)return{data:null,error:h.error};const{data:m,error:p}=await r.from("articles").insert({...c,project_id:e}).select().single();if(p)throw p;return{data:m,error:null}}catch(h){return{data:null,error:h}}},updateArticle:async(c,h)=>{try{const m=await ce(r,e);if(!m.isAuthorized)return{data:null,error:m.error};const{data:p,error:y}=await r.from("articles").update(h).eq("id",c).eq("project_id",e).select().single();if(y)throw y;return{data:p,error:null}}catch(m){return{data:null,error:m}}},updateArticleStatus:async(c,h)=>{try{const m=await ce(r,e);if(!m.isAuthorized)return{data:null,error:m.error};const{data:p,error:y}=await r.from("articles").update({status:h}).eq("id",c).eq("project_id",e).select().single();if(y)throw y;return{data:p,error:null}}catch(m){return{data:null,error:m}}},deleteArticle:async c=>{try{const h=await ce(r,e);if(!h.isAuthorized)return{data:null,error:h.error};const{data:m,error:p}=await r.from("articles").delete().eq("id",c).eq("project_id",e).select().single();if(p)throw p;return{data:m,error:null}}catch(h){return{data:null,error:h}}}}),ko=(r,e)=>({loginWithEmailPassword:async(a,o)=>{var l;try{const{data:u,error:c}=await r.auth.signInWithPassword({email:a,password:o});if(c)throw c;const{data:h,error:m}=await r.from("projects").select("user_id").eq("id",e).single();return m?(await r.auth.signOut(),{data:null,error:"Project not found"}):h.user_id!==((l=u.user)==null?void 0:l.id)?(await r.auth.signOut(),{data:null,error:"You are not authorized for this project"}):{data:u,error:null}}catch(u){return{data:null,error:u}}},logout:async()=>{try{const{error:a}=await r.auth.signOut();if(a)throw a;return{error:null}}catch(a){return{error:a}}},getCurrentSession:async()=>{try{const{data:a,error:o}=await r.auth.getSession();if(o)throw o;return{data:a,error:null}}catch(a){return{data:null,error:a}}},getCurrentUser:async()=>{try{const{data:a,error:o}=await r.auth.getUser();if(o)throw o;return{data:a.user,error:null}}catch(a){return{data:null,error:a}}}}),Eo=(r,e)=>({getGalleryItems:async()=>{try{const{data:l,error:u}=await r.from("gallery_items").select("*").eq("project_id",e).order("created_at",{ascending:!1});if(u)throw u;return{data:l,error:null}}catch(l){return{data:null,error:l}}},getFeaturedGalleryItems:async()=>{try{const{data:l,error:u}=await r.from("gallery_items").select("*").eq("project_id",e).eq("is_featured",!0).order("created_at",{ascending:!1});if(u)throw u;return{data:l,error:null}}catch(l){return{data:null,error:l}}},getGalleryItemsByCategory:async l=>{try{const{data:u,error:c}=await r.from("gallery_items").select("*").eq("project_id",e).eq("category",l).order("created_at",{ascending:!1});if(c)throw c;return{data:u,error:null}}catch(u){return{data:null,error:u}}},createGalleryItem:async l=>{try{const u=await ce(r,e);if(!u.isAuthorized)return{data:null,error:u.error};const{data:c,error:h}=await r.from("gallery_items").insert({...l,project_id:e}).select().single();if(h)throw h;return{data:c,error:null}}catch(u){return{data:null,error:u}}},updateGalleryItem:async(l,u)=>{try{const c=await ce(r,e);if(!c.isAuthorized)return{data:null,error:c.error};const{data:h,error:m}=await r.from("gallery_items").select("project_id").eq("id",l).eq("project_id",e).single();if(m||!h)return{data:null,error:"Item not found or not authorized to modify"};const{data:p,error:y}=await r.from("gallery_items").update(u).eq("id",l).eq("project_id",e).select().single();if(y)throw y;return{data:p,error:null}}catch(c){return{data:null,error:c}}},deleteGalleryItem:async l=>{try{const u=await ce(r,e);if(!u.isAuthorized)return{data:null,error:u.error};const{data:c,error:h}=await r.from("gallery_items").delete().eq("id",l).eq("project_id",e).select().single();if(h)throw h;return{data:c,error:null}}catch(u){return{data:null,error:u}}}}),So=(r,e)=>({getProducts:async()=>{try{const{data:l,error:u}=await r.from("products").select("*").eq("project_id",e).eq("is_active",!0).order("name",{ascending:!0});if(u)throw u;return{data:l,error:null}}catch(l){return{data:null,error:l}}},getProductById:async l=>{try{const{data:u,error:c}=await r.from("products").select("*").eq("project_id",e).eq("id",l).eq("is_active",!0).single();if(c)throw c;return{data:u,error:null}}catch(u){return{data:null,error:u}}},getAllProducts:async()=>{try{const l=await ce(r,e);if(!l.isAuthorized)return{data:null,error:l.error};const{data:u,error:c}=await r.from("products").select("*").eq("project_id",e).order("name",{ascending:!0});if(c)throw c;return{data:u,error:null}}catch(l){return{data:null,error:l}}},createProduct:async l=>{try{const u=await ce(r,e);if(!u.isAuthorized)return{data:null,error:u.error};const{data:c,error:h}=await r.from("products").insert({...l,project_id:e}).select().single();if(h)throw h;return{data:c,error:null}}catch(u){return{data:null,error:u}}},updateProduct:async(l,u)=>{try{const c=await ce(r,e);if(!c.isAuthorized)return{data:null,error:c.error};const{data:h,error:m}=await r.from("products").update(u).eq("id",l).eq("project_id",e).select().single();if(m)throw m;return{data:h,error:null}}catch(c){return{data:null,error:c}}},deleteProduct:async l=>{try{const u=await ce(r,e);if(!u.isAuthorized)return{data:null,error:u.error};const{data:c,error:h}=await r.from("products").delete().eq("id",l).eq("project_id",e).select().single();if(h)throw h;return{data:c,error:null}}catch(u){return{data:null,error:u}}}}),Co=(r,e)=>({getTestimonials:async()=>{try{const{data:o,error:l}=await r.from("testimonials").select("*").eq("project_id",e).order("created_at",{ascending:!1});if(l)throw l;return{data:o,error:null}}catch(o){return{data:null,error:o}}},getFeaturedTestimonials:async()=>{try{const{data:o,error:l}=await r.from("testimonials").select("*").eq("project_id",e).eq("is_featured",!0).order("rating",{ascending:!1});if(l)throw l;return{data:o,error:null}}catch(o){return{data:null,error:o}}},createTestimonial:async o=>{try{const l=await ce(r,e);if(!l.isAuthorized)return{data:null,error:l.error};const{data:u,error:c}=await r.from("testimonials").insert({...o,project_id:e}).select().single();if(c)throw c;return{data:u,error:null}}catch(l){return{data:null,error:l}}},updateTestimonial:async(o,l)=>{try{const u=await ce(r,e);if(!u.isAuthorized)return{data:null,error:u.error};const{data:c,error:h}=await r.from("testimonials").update(l).eq("id",o).eq("project_id",e).select().single();if(h)throw h;return{data:c,error:null}}catch(u){return{data:null,error:u}}},deleteTestimonial:async o=>{try{const l=await ce(r,e);if(!l.isAuthorized)return{data:null,error:l.error};const{data:u,error:c}=await r.from("testimonials").delete().eq("id",o).eq("project_id",e).select().single();if(c)throw c;return{data:u,error:null}}catch(l){return{data:null,error:l}}}}),To=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Promise.resolve().then(()=>vt).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Xr extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class No extends Xr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Po extends Xr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ro extends Xr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zr;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Zr||(Zr={}));var Oo=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(s.next(c))}catch(h){a(h)}}function l(c){try{u(s.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):n(c.value).then(o,l)}u((s=s.apply(r,e||[])).next())})};class Ao{constructor(e,{headers:t={},customFetch:s,region:n=Zr.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=To(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return Oo(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:a}=t;let o={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let u;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(o["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(o["Content-Type"]="application/json",u=JSON.stringify(a)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:u}).catch(y=>{throw new No(y)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new Po(c);if(!c.ok)throw new Ro(c);let m=((s=c.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),p;return m==="application/json"?p=yield c.json():m==="application/octet-stream"?p=yield c.blob():m==="text/event-stream"?p=c:m==="multipart/form-data"?p=yield c.formData():p=yield c.text(),{data:p,error:null}}catch(n){return{data:null,error:n}}})}}var ne={},dt={},ht={},ft={},mt={},pt={},Lo=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},gt=Lo();const $o=gt.fetch,pn=gt.fetch.bind(gt),gn=gt.Headers,Io=gt.Request,Do=gt.Response,vt=Object.freeze(Object.defineProperty({__proto__:null,Headers:gn,Request:Io,Response:Do,default:pn,fetch:$o},Symbol.toStringTag,{value:"Module"})),Fo=oa(vt);var br={},vn;function yn(){if(vn)return br;vn=1,Object.defineProperty(br,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return br.default=r,br}var bn;function wn(){if(bn)return pt;bn=1;var r=pt&&pt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(pt,"__esModule",{value:!0});const e=r(Fo),t=r(yn());class s{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=Object.assign({},this.headers),this.headers[i]=a,this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,h,m;let p=null,y=null,x=null,v=u.status,k=u.statusText;if(u.ok){if(this.method!=="HEAD"){const I=await u.text();I===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?y=I:y=JSON.parse(I))}const j=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),T=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");j&&T&&T.length>1&&(x=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(p={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,x=null,v=406,k="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const j=await u.text();try{p=JSON.parse(j),Array.isArray(p)&&u.status===404&&(y=[],p=null,v=200,k="OK")}catch{u.status===404&&j===""?(v=204,k="No Content"):p={message:j}}if(p&&this.isMaybeSingle&&(!((m=p==null?void 0:p.details)===null||m===void 0)&&m.includes("0 rows"))&&(p=null,v=200,k="OK"),p&&this.shouldThrowOnError)throw new t.default(p)}return{error:p,data:y,count:x,status:v,statusText:k}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,h,m;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(m=u==null?void 0:u.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,a)}returns(){return this}overrideTypes(){return this}}return pt.default=s,pt}var xn;function _n(){if(xn)return mt;xn=1;var r=mt&&mt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(mt,"__esModule",{value:!0});const e=r(wn());class t extends e.default{select(n){let i=!1;const a=(n??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(n,{ascending:i=!0,nullsFirst:a,foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${n}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:a=i}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${n}`),this}range(n,i,{foreignTable:a,referencedTable:o=a}={}){const l=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${n}`),this.url.searchParams.set(u,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:n=!1,verbose:i=!1,settings:a=!1,buffers:o=!1,wal:l=!1,format:u="text"}={}){var c;const h=[n?"analyze":null,i?"verbose":null,a?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),m=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${m}"; options=${h};`,u==="json"?this:this}rollback(){var n;return((n=this.headers.Prefer)!==null&&n!==void 0?n:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return mt.default=t,mt}var jn;function es(){if(jn)return ft;jn=1;var r=ft&&ft.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ft,"__esModule",{value:!0});const e=r(_n());class t extends e.default{eq(n,i){return this.url.searchParams.append(n,`eq.${i}`),this}neq(n,i){return this.url.searchParams.append(n,`neq.${i}`),this}gt(n,i){return this.url.searchParams.append(n,`gt.${i}`),this}gte(n,i){return this.url.searchParams.append(n,`gte.${i}`),this}lt(n,i){return this.url.searchParams.append(n,`lt.${i}`),this}lte(n,i){return this.url.searchParams.append(n,`lte.${i}`),this}like(n,i){return this.url.searchParams.append(n,`like.${i}`),this}likeAllOf(n,i){return this.url.searchParams.append(n,`like(all).{${i.join(",")}}`),this}likeAnyOf(n,i){return this.url.searchParams.append(n,`like(any).{${i.join(",")}}`),this}ilike(n,i){return this.url.searchParams.append(n,`ilike.${i}`),this}ilikeAllOf(n,i){return this.url.searchParams.append(n,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(n,i){return this.url.searchParams.append(n,`ilike(any).{${i.join(",")}}`),this}is(n,i){return this.url.searchParams.append(n,`is.${i}`),this}in(n,i){const a=Array.from(new Set(i)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(n,`in.(${a})`),this}contains(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cs.{${i.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(i)}`),this}containedBy(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cd.{${i.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(i)}`),this}rangeGt(n,i){return this.url.searchParams.append(n,`sr.${i}`),this}rangeGte(n,i){return this.url.searchParams.append(n,`nxl.${i}`),this}rangeLt(n,i){return this.url.searchParams.append(n,`sl.${i}`),this}rangeLte(n,i){return this.url.searchParams.append(n,`nxr.${i}`),this}rangeAdjacent(n,i){return this.url.searchParams.append(n,`adj.${i}`),this}overlaps(n,i){return typeof i=="string"?this.url.searchParams.append(n,`ov.${i}`):this.url.searchParams.append(n,`ov.{${i.join(",")}}`),this}textSearch(n,i,{config:a,type:o}={}){let l="";o==="plain"?l="pl":o==="phrase"?l="ph":o==="websearch"&&(l="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(n,`${l}fts${u}.${i}`),this}match(n){return Object.entries(n).forEach(([i,a])=>{this.url.searchParams.append(i,`eq.${a}`)}),this}not(n,i,a){return this.url.searchParams.append(n,`not.${i}.${a}`),this}or(n,{foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.or`:"or";return this.url.searchParams.append(o,`(${n})`),this}filter(n,i,a){return this.url.searchParams.append(n,`${i}.${a}`),this}}return ft.default=t,ft}var kn;function En(){if(kn)return ht;kn=1;var r=ht&&ht.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ht,"__esModule",{value:!0});const e=r(es());class t{constructor(n,{headers:i={},schema:a,fetch:o}){this.url=n,this.headers=i,this.schema=a,this.fetch=o}select(n,{head:i=!1,count:a}={}){const o=i?"HEAD":"GET";let l=!1;const u=(n??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),a&&(this.headers.Prefer=`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(n,{count:i,defaultToNull:a=!0}={}){const o="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(n)){const u=n.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}upsert(n,{onConflict:i,ignoreDuplicates:a=!1,count:o,defaultToNull:l=!0}={}){const u="POST",c=[`resolution=${a?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&c.push(this.headers.Prefer),o&&c.push(`count=${o}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(n)){const h=n.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(h.length>0){const m=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}update(n,{count:i}={}){const a="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),this.headers.Prefer=o.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}delete({count:n}={}){const i="DELETE",a=[];return n&&a.push(`count=${n}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return ht.default=t,ht}var Bt={},zt={},Sn;function Uo(){return Sn||(Sn=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.version=void 0,zt.version="0.0.0-automated"),zt}var Cn;function Mo(){if(Cn)return Bt;Cn=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.DEFAULT_HEADERS=void 0;const r=Uo();return Bt.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r.version}`},Bt}var Tn;function qo(){if(Tn)return dt;Tn=1;var r=dt&&dt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(dt,"__esModule",{value:!0});const e=r(En()),t=r(es()),s=Mo();class n{constructor(a,{headers:o={},schema:l,fetch:u}={}){this.url=a,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),o),this.schemaName=l,this.fetch=u}from(a){const o=new URL(`${this.url}/${a}`);return new e.default(o,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:l=!1,get:u=!1,count:c}={}){let h;const m=new URL(`${this.url}/rpc/${a}`);let p;l||u?(h=l?"HEAD":"GET",Object.entries(o).filter(([x,v])=>v!==void 0).map(([x,v])=>[x,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([x,v])=>{m.searchParams.append(x,v)})):(h="POST",p=o);const y=Object.assign({},this.headers);return c&&(y.Prefer=`count=${c}`),new t.default({method:h,url:m,headers:y,schema:this.schemaName,body:p,fetch:this.fetch,allowEmpty:!1})}}return dt.default=n,dt}var Nn;function Bo(){if(Nn)return ne;Nn=1;var r=ne&&ne.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ne,"__esModule",{value:!0}),ne.PostgrestError=ne.PostgrestBuilder=ne.PostgrestTransformBuilder=ne.PostgrestFilterBuilder=ne.PostgrestQueryBuilder=ne.PostgrestClient=void 0;const e=r(qo());ne.PostgrestClient=e.default;const t=r(En());ne.PostgrestQueryBuilder=t.default;const s=r(es());ne.PostgrestFilterBuilder=s.default;const n=r(_n());ne.PostgrestTransformBuilder=n.default;const i=r(wn());ne.PostgrestBuilder=i.default;const a=r(yn());return ne.PostgrestError=a.default,ne.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:i.default,PostgrestError:a.default},ne}var zo=Bo();const Vo=Ys(zo),{PostgrestClient:Wo,PostgrestQueryBuilder:zd,PostgrestFilterBuilder:Vd,PostgrestTransformBuilder:Wd,PostgrestBuilder:Gd,PostgrestError:Hd}=Vo,Go={"X-Client-Info":"realtime-js/2.11.2"},Ho="1.0.0",Pn=1e4,Ko=1e3;var yt;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(yt||(yt={}));var ye;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(ye||(ye={}));var je;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(je||(je={}));var ts;(function(r){r.websocket="websocket"})(ts||(ts={}));var et;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(et||(et={}));class Jo{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=s.decode(e.slice(a,a+n));a=a+n;const l=s.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(s.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class Rn{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var J;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(J||(J={}));const On=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,a)=>(i[a]=Qo(a,r,e,n),i),{})},Qo=(r,e,t,s)=>{const n=e.find(o=>o.name===r),i=n==null?void 0:n.type,a=t[r];return i&&!s.includes(i)?An(i,a):rs(a)},An=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return el(e,t)}switch(r){case J.bool:return Yo(e);case J.float4:case J.float8:case J.int2:case J.int4:case J.int8:case J.numeric:case J.oid:return Xo(e);case J.json:case J.jsonb:return Zo(e);case J.timestamp:return tl(e);case J.abstime:case J.date:case J.daterange:case J.int4range:case J.int8range:case J.money:case J.reltime:case J.text:case J.time:case J.timestamptz:case J.timetz:case J.tsrange:case J.tstzrange:return rs(e);default:return rs(e)}},rs=r=>r,Yo=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Xo=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Zo=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},el=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let i;const a=r.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>An(e,o))}return r},tl=r=>typeof r=="string"?r.replace(" ","T"):r,Ln=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ss{constructor(e,t,s={},n=Pn){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var $n;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})($n||($n={}));class Vt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vt.syncState(this.state,n,i,a),this.pendingDiffs.forEach(l=>{this.state=Vt.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Vt.syncDiff(this.state,n,i,a),o())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const i=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(i,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const h=i[u];if(h){const m=c.map(v=>v.presence_ref),p=h.map(v=>v.presence_ref),y=c.filter(v=>p.indexOf(v.presence_ref)<0),x=h.filter(v=>m.indexOf(v.presence_ref)<0);y.length>0&&(o[u]=y),x.length>0&&(l[u]=x)}else o[u]=c}),this.syncDiff(i,{joins:o,leaves:l},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(o,l)=>{var u;const c=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),c.length>0){const h=e[o].map(p=>p.presence_ref),m=c.filter(p=>h.indexOf(p.presence_ref)<0);e[o].unshift(...m)}s(o,c,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[o]=u,n(o,u,l),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var In;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(In||(In={}));var Dn;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Dn||(Dn={}));var Ne;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Ne||(Ne={}));class ns{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=ye.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ss(this,je.join,this.params,this.timeout),this.rejoinTimer=new Rn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ye.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ye.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ye.errored,this.rejoinTimer.scheduleTimeout())}),this._on(je.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Vt(this),this.broadcastEndpointURL=Ln(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:o}}=this.params;this._onError(c=>e==null?void 0:e(Ne.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(Ne.CLOSED));const l={},u={broadcast:i,presence:a,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(c=>c.filter))!==null&&n!==void 0?n:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var h;if(this.socket.setAuth(),c===void 0){e==null||e(Ne.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,p=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,y=[];for(let x=0;x<p;x++){const v=m[x],{filter:{event:k,schema:S,table:j,filter:T}}=v,I=c&&c[x];if(I&&I.event===k&&I.schema===S&&I.table===j&&I.filter===T)y.push(Object.assign(Object.assign({},v),{id:I.id}));else{this.unsubscribe(),e==null||e(Ne.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Ne.SUBSCRIBED);return}}).receive("error",c=>{e==null||e(Ne.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ne.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ye.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(je.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const n=new ss(this,je.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),a}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new ss(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=je;if(s&&[o,l,u,c].indexOf(a)>=0&&s!==this._joinRef())return;let m=this._onMessage(a,t,s);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var y,x,v;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(x=p.filter)===null||x===void 0?void 0:x.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===a}).map(p=>p.callback(m,s)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var y,x,v,k,S,j;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const T=p.id,I=(y=p.filter)===null||y===void 0?void 0:y.event;return T&&((x=t.ids)===null||x===void 0?void 0:x.includes(T))&&(I==="*"||(I==null?void 0:I.toLocaleLowerCase())===((v=t.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const T=(S=(k=p==null?void 0:p.filter)===null||k===void 0?void 0:k.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return T==="*"||T===((j=t==null?void 0:t.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:x,table:v,commit_timestamp:k,type:S,errors:j}=y;m=Object.assign(Object.assign({},{schema:x,table:v,commit_timestamp:k,eventType:S,new:{},old:{},errors:j}),this._getPayloadRecords(y))}p.callback(m,s)})}_isClosed(){return this.state===ye.closed}_isJoined(){return this.state===ye.joined}_isJoining(){return this.state===ye.joining}_isLeaving(){return this.state===ye.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&ns.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(je.close,{},e)}_onError(e){this._on(je.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ye.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=On(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=On(e.columns,e.old_record)),t}}const rl=()=>{},sl=typeof WebSocket<"u",nl=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class il{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Go,this.params={},this.timeout=Pn,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=rl,this.conn=null,this.sendBuffer=[],this.serializer=new Jo,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Promise.resolve().then(()=>vt).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${ts.websocket}`,this.httpEndpoint=Ln(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Rn(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(sl){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new al(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Promise.resolve().then(()=>pd).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ho}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case yt.connecting:return et.Connecting;case yt.open:return et.Open;case yt.closing:return et.Closing;default:return et.Closed}}isConnected(){return this.connectionState()===et.Open}channel(e,t={config:{}}){const s=new ns(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:n,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${s} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let s=null;try{s=JSON.parse(atob(t.split(".")[1]))}catch{}if(s&&s.exp&&!(Math.floor(Date.now()/1e3)-s.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`);this.accessTokenValue=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(je.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Ko,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:i,ref:a}=t;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${a&&"("+a+")"||""}`,i),this.channels.filter(o=>o._isMember(s)).forEach(o=>o._trigger(n,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(je.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([nl],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class al{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=yt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class is extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ie(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class ol extends is{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class as extends is{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ll=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(s.next(c))}catch(h){a(h)}}function l(c){try{u(s.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):n(c.value).then(o,l)}u((s=s.apply(r,e||[])).next())})};const Fn=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Promise.resolve().then(()=>vt).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},cl=()=>ll(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(()=>vt)).Response:Response}),os=r=>{if(Array.isArray(r))return r.map(t=>os(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=os(s)}),e};var tt=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(s.next(c))}catch(h){a(h)}}function l(c){try{u(s.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):n(c.value).then(o,l)}u((s=s.apply(r,e||[])).next())})};const ls=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),ul=(r,e,t)=>tt(void 0,void 0,void 0,function*(){const s=yield cl();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(n=>{e(new ol(ls(n),r.status||500))}).catch(n=>{e(new as(ls(n),n))}):e(new as(ls(r),r))}),dl=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),t))};function Wt(r,e,t,s,n,i){return tt(this,void 0,void 0,function*(){return new Promise((a,o)=>{r(t,dl(e,s,n,i)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>ul(l,o,s))})})}function wr(r,e,t,s){return tt(this,void 0,void 0,function*(){return Wt(r,"GET",e,t,s)})}function Le(r,e,t,s,n){return tt(this,void 0,void 0,function*(){return Wt(r,"POST",e,s,n,t)})}function hl(r,e,t,s,n){return tt(this,void 0,void 0,function*(){return Wt(r,"PUT",e,s,n,t)})}function fl(r,e,t,s){return tt(this,void 0,void 0,function*(){return Wt(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Un(r,e,t,s,n){return tt(this,void 0,void 0,function*(){return Wt(r,"DELETE",e,s,n,t)})}var fe=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(s.next(c))}catch(h){a(h)}}function l(c){try{u(s.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):n(c.value).then(o,l)}u((s=s.apply(r,e||[])).next())})};const ml={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class pl{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Fn(n)}uploadOrUpdate(e,t,s,n){return fe(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Mn),n);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=s,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),m=yield h.json();return h.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(ie(i))return{data:null,error:i};throw i}})}upload(e,t,s){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return fe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:Mn.upsert},n),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",u.cacheControl)):(l=s,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:c}),m=yield h.json();return h.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(l){if(ie(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return fe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const i=yield Le(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new is("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}})}update(e,t,s){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return fe(this,void 0,void 0,function*(){try{return{data:yield Le(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}})}copy(e,t,s){return fe(this,void 0,void 0,function*(){try{return{data:{path:(yield Le(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return fe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Le(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return fe(this,void 0,void 0,function*(){try{const n=yield Le(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}})}download(e,t){return fe(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield wr(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(ie(o))return{data:null,error:o};throw o}})}info(e){return fe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield wr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:os(s),error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}})}exists(e){return fe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield fl(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(ie(s)&&s instanceof as){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&n.push(l);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${u}`)}}}remove(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}list(e,t,s){return fe(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},ml),t),{prefix:e||""});return{data:yield Le(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const gl={"X-Client-Info":"storage-js/2.7.1"};var bt=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(s.next(c))}catch(h){a(h)}}function l(c){try{u(s.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):n(c.value).then(o,l)}u((s=s.apply(r,e||[])).next())})};class vl{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},gl),t),this.fetch=Fn(s)}listBuckets(){return bt(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ie(e))return{data:null,error:e};throw e}})}getBucket(e){return bt(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return bt(this,void 0,void 0,function*(){try{return{data:yield Le(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return bt(this,void 0,void 0,function*(){try{return{data:yield hl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}})}emptyBucket(e){return bt(this,void 0,void 0,function*(){try{return{data:yield Le(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}deleteBucket(e){return bt(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}}class yl extends vl{constructor(e,t={},s){super(e,t,s)}from(e){return new pl(this.url,this.headers,e,this.fetch)}}const bl="2.49.4";let Gt="";typeof Deno<"u"?Gt="deno":typeof document<"u"?Gt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gt="react-native":Gt="node";const wl={headers:{"X-Client-Info":`supabase-js-${Gt}/${bl}`}},xl={schema:"public"},_l={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jl={};var kl=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(s.next(c))}catch(h){a(h)}}function l(c){try{u(s.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):n(c.value).then(o,l)}u((s=s.apply(r,e||[])).next())})};const El=r=>{let e;return r?e=r:typeof fetch>"u"?e=pn:e=fetch,(...t)=>e(...t)},Sl=()=>typeof Headers>"u"?gn:Headers,Cl=(r,e,t)=>{const s=El(t),n=Sl();return(i,a)=>kl(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:r;let u=new n(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),s(i,Object.assign(Object.assign({},a),{headers:u}))})};var Tl=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(s.next(c))}catch(h){a(h)}}function l(c){try{u(s.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):n(c.value).then(o,l)}u((s=s.apply(r,e||[])).next())})};function Nl(r){return r.replace(/\/$/,"")}function Pl(r,e){const{db:t,auth:s,realtime:n,global:i}=r,{db:a,auth:o,realtime:l,global:u}=e,c={db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),s),realtime:Object.assign(Object.assign({},l),n),global:Object.assign(Object.assign({},u),i),accessToken:()=>Tl(this,void 0,void 0,function*(){return""})};return r.accessToken?c.accessToken=r.accessToken:delete c.accessToken,c}const qn="2.69.1",wt=30*1e3,cs=3,us=cs*wt,Rl="http://localhost:9999",Ol="supabase.auth.token",Al={"X-Client-Info":`gotrue-js/${qn}`},ds="X-Supabase-Api-Version",Bn={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ll=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,$l=6e5;class hs extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function A(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Il extends hs{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function Dl(r){return A(r)&&r.name==="AuthApiError"}class zn extends hs{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class $e extends hs{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class Ie extends $e{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Fl(r){return A(r)&&r.name==="AuthSessionMissingError"}class fs extends $e{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xr extends $e{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _r extends $e{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ul(r){return A(r)&&r.name==="AuthImplicitGrantRedirectError"}class Vn extends $e{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ms extends $e{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ps(r){return A(r)&&r.name==="AuthRetryableFetchError"}class Wn extends $e{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Ht extends $e{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Gn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hn=` 	
\r=`.split(""),Ml=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Hn.length;e+=1)r[Hn[e].charCodeAt(0)]=-2;for(let e=0;e<Gn.length;e+=1)r[Gn[e].charCodeAt(0)]=e;return r})();function Kn(r,e,t){const s=Ml[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Jn(r){const e=[],t=a=>{e.push(String.fromCodePoint(a))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=a=>{zl(a,s,t)};for(let a=0;a<r.length;a+=1)Kn(r.charCodeAt(a),n,i);return e.join("")}function ql(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Bl(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}ql(s,e)}}function zl(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Vl(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<r.length;n+=1)Kn(r.charCodeAt(n),t,s);return new Uint8Array(e)}function Wl(r){const e=[];return Bl(r,t=>e.push(t)),new Uint8Array(e)}function Gl(r){return Math.round(Date.now()/1e3)+r}function Hl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Se=()=>typeof window<"u"&&typeof document<"u",rt={tested:!1,writable:!1},Kt=()=>{if(!Se())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(rt.tested)return rt.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),rt.tested=!0,rt.writable=!0}catch{rt.tested=!0,rt.writable=!1}return rt.writable};function Kl(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const Qn=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Promise.resolve().then(()=>vt).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Jl=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Yn=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},jr=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},kr=async(r,e)=>{await r.removeItem(e)};class Er{constructor(){this.promise=new Er.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Er.promiseConstructor=Promise;function gs(r){const e=r.split(".");if(e.length!==3)throw new Ht("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Ll.test(e[s]))throw new Ht("JWT not in base64url format");return{header:JSON.parse(Jn(e[0])),payload:JSON.parse(Jn(e[1])),signature:Vl(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ql(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Yl(r,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await r(i);if(!e(i,null,a)){s(a);return}}catch(a){if(!e(i,a)){n(a);return}}})()})}function Xl(r){return("0"+r.toString(16)).substr(-2)}function Zl(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Xl).join("")}async function ec(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function tc(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await ec(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xt(r,e,t=!1){const s=Zl();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await Yn(r,`${e}-code-verifier`,n);const i=await tc(s);return[i,s===i?"plain":"s256"]}const rc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sc(r){const e=r.headers.get(ds);if(!e||!e.match(rc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function nc(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function ic(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var ac=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const st=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),oc=[502,503,504];async function Xn(r){var e;if(!Jl(r))throw new ms(st(r),0);if(oc.includes(r.status))throw new ms(st(r),r.status);let t;try{t=await r.json()}catch(i){throw new zn(st(i),i)}let s;const n=sc(r);if(n&&n.getTime()>=Bn["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Wn(st(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Ie}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Wn(st(t),r.status,t.weak_password.reasons);throw new Il(st(t),r.status||500,s)}const lc=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function F(r,e,t,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[ds]||(i[ds]=Bn["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const a=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await cc(r,e,t+o,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function cc(r,e,t,s,n,i){const a=lc(e,s,n,i);let o;try{o=await r(t,Object.assign({},a))}catch(l){throw console.error(l),new ms(st(l),0)}if(o.ok||await Xn(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(l){await Xn(l)}}function De(r){var e;let t=null;fc(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Gl(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function Zn(r){const e=De(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Fe(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function uc(r){return{data:r,error:null}}function dc(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i}=r,a=ac(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function hc(r){return r}function fc(r){return r.access_token&&r.refresh_token&&r.expires_in}var mc=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class pc{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Qn(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await F(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(A(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await F(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Fe})}catch(s){if(A(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=mc(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await F(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:dc,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(A(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await F(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Fe})}catch(t){if(A(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await F(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:hc});if(c.error)throw c.error;const h=await c.json(),m=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const x=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);u[`${v}Page`]=x}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(A(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await F(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Fe})}catch(t){if(A(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await F(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Fe})}catch(s){if(A(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await F(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Fe})}catch(s){if(A(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await F(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(A(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await F(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(A(t))return{data:null,error:t};throw t}}}const gc={getItem:r=>Kt()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Kt()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Kt()&&globalThis.localStorage.removeItem(r)}};function ei(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function vc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const _t={debug:!!(globalThis&&Kt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ti extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class yc extends ti{}async function bc(r,e,t){_t.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),_t.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){_t.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{_t.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw _t.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new yc(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(_t.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}vc();const wc={url:Rl,storageKey:Ol,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Al,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ri(r,e,t){return await t()}class Jt{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Jt.nextInstanceID,Jt.nextInstanceID+=1,this.instanceID>0&&Se()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},wc),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new pc({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Qn(n.fetch),this.lock=n.lock||ri,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Se()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=bc:this.lock=ri,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Kt()?this.storage=gc:(this.memoryStorage={},this.storage=ei(this.memoryStorage)):(this.memoryStorage={},this.storage=ei(this.memoryStorage)),Se()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qn}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Kl(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Se()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Ul(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return A(t)?{error:t}:{error:new zn("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:De}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(A(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,n;try{let i;if("email"in e){const{email:c,password:h,options:m}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await xt(this.storage,this.storageKey)),i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:c,password:h,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:y},xform:De})}else if("phone"in e){const{phone:c,password:h,options:m}=e;i=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(n=m==null?void 0:m.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:De})}else throw new xr("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(A(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Zn})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Zn})}else throw new xr("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new fs}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await jr(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:i,error:a}=await F(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:De});if(await kr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new fs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}catch(i){if(A(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:i,nonce:a}=e,o=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:De}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new fs}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,i,a;try{if("email"in e){const{email:o,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await xt(this.storage,this.storageKey));const{error:h}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:c}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new xr("You must provide either an email or phone number.")}catch(o){if(A(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,s;try{let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:o}=await F(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:De});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(n){if(A(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await xt(this.storage,this.storageKey)),await F(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:uc})}catch(i){if(A(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Ie;const{error:n}=await F(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(A(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:a}=await F(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:a,error:o}=await F(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new xr("You must provide either an email or phone number and a type")}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await jr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<us:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Fe}):await this._useSession(async t=>{var s,n,i;const{data:a,error:o}=t;if(o)throw o;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ie}:await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Fe})})}catch(t){if(A(t))return Fl(t)&&(await this._removeSession(),await kr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new Ie;const a=n.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await xt(this.storage,this.storageKey));const{data:u,error:c}=await F(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Fe});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(A(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ie;const t=Date.now()/1e3;let s=t,n=!0,i=null;const{payload:a}=gs(e.access_token);if(a.exp&&(s=a.exp,n=s<=t),n){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(A(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Ie;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Se())throw new _r("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _r(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Vn("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _r("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Vn("No code detected.");const{data:S,error:j}=await this._exchangeCodeForSession(e.code);if(j)throw j;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=e;if(!i||!o||!a||!u)throw new _r("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(o);let m=c+h;l&&(m=parseInt(l));const p=m-c;p*1e3<=wt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const y=m-h;c-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,c):c-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,c);const{data:x,error:v}=await this._getUser(i);if(v)throw v;const k={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:m,refresh_token:a,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:e.type},error:null}}catch(s){if(A(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await jr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const a=(s=n.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Dl(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await kr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Hl(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:i},error:a}=t;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await xt(this.storage,this.storageKey,!0));try{return await F(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(A(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(A(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async i=>{var a,o,l,u,c;const{data:h,error:m}=i;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await F(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(n)throw n;return Se()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(A(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)throw a;return await F(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Yl(async n=>(n>0&&await Ql(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await F(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:De})),(n,i)=>{const a=200*Math.pow(2,n);return i&&ps(i)&&Date.now()+a-s<wt})}catch(s){if(this._debug(t,"error",s),A(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Se()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await jr(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<us;if(this._debug(t,`session has${n?"":" not"} expired with margin of ${us}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),ps(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Ie;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Er;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Ie;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(n,"error",i),A(i)){const a={session:null,error:i};return ps(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Yn(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await kr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Se()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),wt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/wt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${wt}ms, refresh threshold is ${cs} ticks`),n<=cs&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ti)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Se()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,a]=await xt(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(o.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await F(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await F(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(A(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(A(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=s.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:s,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=gs(n.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");const c=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(a=>a.kid===e);if(s||(s=this.jwks.keys.find(a=>a.kid===e),s&&this.jwks_cached_at+$l>Date.now()))return s;const{data:n,error:i}=await F(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new Ht("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),s=n.keys.find(a=>a.kid===e),!s)throw new Ht("No matching signing key found in JWKS");return s}async getClaims(e,t={keys:[]}){try{let s=e;if(!s){const{data:p,error:y}=await this.getSession();if(y||!p.session)return{data:null,error:y};s=p.session.access_token}const{header:n,payload:i,signature:a,raw:{header:o,payload:l}}=gs(s);if(nc(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:i,header:n,signature:a},error:null}}const u=ic(n.alg),c=await this.fetchJwk(n.kid,t),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,a,Wl(`${o}.${l}`)))throw new Ht("Invalid JWT signature");return{data:{claims:i,header:n,signature:a},error:null}}catch(s){if(A(s))return{data:null,error:s};throw s}}}Jt.nextInstanceID=0;const xc=Jt;class _c extends xc{constructor(e){super(e)}}var jc=function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(s.next(c))}catch(h){a(h)}}function l(c){try{u(s.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):n(c.value).then(o,l)}u((s=s.apply(r,e||[])).next())})};class kc{constructor(e,t,s){var n,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=Nl(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:xl,realtime:jl,auth:Object.assign(Object.assign({},_l),{storageKey:l}),global:wl},c=Pl(s??{},u);this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=c.auth)!==null&&a!==void 0?a:{},this.headers,c.global.fetch),this.fetch=Cl(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new Wo(`${o}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new Ao(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new yl(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return jc(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:a,lock:o,debug:l},u,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _c({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:a,lock:o,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new il(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ec=(r,e,t)=>new kc(r,e,t),Sc=(r,e)=>Ec(r,e);function Cc(r,e="",t=""){if(!r)throw new Error("projectId is required");const s=Sc(e,t);return{articles:jo(s,r),gallery:Eo(s,r),products:So(s,r),testimonials:Co(s,r),auth:ko(s,r)}}function si(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function Tc(...r){return e=>{let t=!1;const s=r.map(n=>{const i=si(n,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let n=0;n<s.length;n++){const i=s[n];typeof i=="function"?i():si(r[n],null)}}}}function Nc(...r){return g.useCallback(Tc(...r),r)}function ni(r){const e=Rc(r),t=g.forwardRef((s,n)=>{const{children:i,...a}=s,o=g.Children.toArray(i),l=o.find(Ac);if(l){const u=l.props.children,c=o.map(h=>h===l?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:h);return d.jsx(e,{...a,ref:n,children:g.isValidElement(u)?g.cloneElement(u,void 0,c):null})}return d.jsx(e,{...a,ref:n,children:i})});return t.displayName=`${r}.Slot`,t}var Pc=ni("Slot");function Rc(r){const e=g.forwardRef((t,s)=>{const{children:n,...i}=t,a=g.isValidElement(n)?$c(n):void 0,o=Nc(a,s);if(g.isValidElement(n)){const l=Lc(i,n.props);return n.type!==g.Fragment&&(l.ref=o),g.cloneElement(n,l)}return g.Children.count(n)>1?g.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var Oc=Symbol("radix.slottable");function Ac(r){return g.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===Oc}function Lc(r,e){const t={...e};for(const s in e){const n=r[s],i=e[s];/^on[A-Z]/.test(s)?n&&i?t[s]=(...o)=>{const l=i(...o);return n(...o),l}:n&&(t[s]=n):s==="style"?t[s]={...n,...i}:s==="className"&&(t[s]=[n,i].filter(Boolean).join(" "))}return{...r,...t}}function $c(r){var s,n;let e=(s=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(n=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function ii(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var n=r.length;for(e=0;e<n;e++)r[e]&&(t=ii(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function ai(){for(var r,e,t=0,s="",n=arguments.length;t<n;t++)(r=arguments[t])&&(e=ii(r))&&(s&&(s+=" "),s+=e);return s}const oi=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,li=ai,ci=(r,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return li(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:n,defaultVariants:i}=e,a=Object.keys(n).map(u=>{const c=t==null?void 0:t[u],h=i==null?void 0:i[u];if(c===null)return null;const m=oi(c)||oi(h);return n[u][m]}),o=t&&Object.entries(t).reduce((u,c)=>{let[h,m]=c;return m===void 0||(u[h]=m),u},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,c)=>{let{class:h,className:m,...p}=c;return Object.entries(p).every(y=>{let[x,v]=y;return Array.isArray(v)?v.includes({...i,...o}[x]):{...i,...o}[x]===v})?[...u,h,m]:u},[]);return li(r,a,l,t==null?void 0:t.class,t==null?void 0:t.className)},vs="-",Ic=r=>{const e=Fc(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=r;return{getClassGroupId:a=>{const o=a.split(vs);return o[0]===""&&o.length!==1&&o.shift(),ui(o,e)||Dc(a)},getConflictingClassGroupIds:(a,o)=>{const l=t[a]||[];return o&&s[a]?[...l,...s[a]]:l}}},ui=(r,e)=>{var a;if(r.length===0)return e.classGroupId;const t=r[0],s=e.nextPart.get(t),n=s?ui(r.slice(1),s):void 0;if(n)return n;if(e.validators.length===0)return;const i=r.join(vs);return(a=e.validators.find(({validator:o})=>o(i)))==null?void 0:a.classGroupId},di=/^\[(.+)\]$/,Dc=r=>{if(di.test(r)){const e=di.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Fc=r=>{const{theme:e,prefix:t}=r,s={nextPart:new Map,validators:[]};return Mc(Object.entries(r.classGroups),t).forEach(([i,a])=>{ys(a,s,i,e)}),s},ys=(r,e,t,s)=>{r.forEach(n=>{if(typeof n=="string"){const i=n===""?e:hi(e,n);i.classGroupId=t;return}if(typeof n=="function"){if(Uc(n)){ys(n(s),e,t,s);return}e.validators.push({validator:n,classGroupId:t});return}Object.entries(n).forEach(([i,a])=>{ys(a,hi(e,i),t,s)})})},hi=(r,e)=>{let t=r;return e.split(vs).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},Uc=r=>r.isThemeGetter,Mc=(r,e)=>e?r.map(([t,s])=>{const n=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,o])=>[e+a,o])):i);return[t,n]}):r,qc=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const n=(i,a)=>{t.set(i,a),e++,e>r&&(e=0,s=t,t=new Map)};return{get(i){let a=t.get(i);if(a!==void 0)return a;if((a=s.get(i))!==void 0)return n(i,a),a},set(i,a){t.has(i)?t.set(i,a):n(i,a)}}},fi="!",Bc=r=>{const{separator:e,experimentalParseClassName:t}=r,s=e.length===1,n=e[0],i=e.length,a=o=>{const l=[];let u=0,c=0,h;for(let v=0;v<o.length;v++){let k=o[v];if(u===0){if(k===n&&(s||o.slice(v,v+i)===e)){l.push(o.slice(c,v)),c=v+i;continue}if(k==="/"){h=v;continue}}k==="["?u++:k==="]"&&u--}const m=l.length===0?o:o.substring(c),p=m.startsWith(fi),y=p?m.substring(1):m,x=h&&h>c?h-c:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:x}};return t?o=>t({className:o,parseClassName:a}):a},zc=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},Vc=r=>({cache:qc(r.cacheSize),parseClassName:Bc(r),...Ic(r)}),Wc=/\s+/,Gc=(r,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:n}=e,i=[],a=r.trim().split(Wc);let o="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{modifiers:c,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:p}=t(u);let y=!!p,x=s(y?m.substring(0,p):m);if(!x){if(!y){o=u+(o.length>0?" "+o:o);continue}if(x=s(m),!x){o=u+(o.length>0?" "+o:o);continue}y=!1}const v=zc(c).join(":"),k=h?v+fi:v,S=k+x;if(i.includes(S))continue;i.push(S);const j=n(x,y);for(let T=0;T<j.length;++T){const I=j[T];i.push(k+I)}o=u+(o.length>0?" "+o:o)}return o};function Hc(){let r=0,e,t,s="";for(;r<arguments.length;)(e=arguments[r++])&&(t=mi(e))&&(s&&(s+=" "),s+=t);return s}const mi=r=>{if(typeof r=="string")return r;let e,t="";for(let s=0;s<r.length;s++)r[s]&&(e=mi(r[s]))&&(t&&(t+=" "),t+=e);return t};function Kc(r,...e){let t,s,n,i=a;function a(l){const u=e.reduce((c,h)=>h(c),r());return t=Vc(u),s=t.cache.get,n=t.cache.set,i=o,o(l)}function o(l){const u=s(l);if(u)return u;const c=Gc(l,t);return n(l,c),c}return function(){return i(Hc.apply(null,arguments))}}const X=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},pi=/^\[(?:([a-z-]+):)?(.+)\]$/i,Jc=/^\d+\/\d+$/,Qc=new Set(["px","full","screen"]),Yc=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Xc=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Zc=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,eu=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tu=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pe=r=>jt(r)||Qc.has(r)||Jc.test(r),Ue=r=>kt(r,"length",cu),jt=r=>!!r&&!Number.isNaN(Number(r)),bs=r=>kt(r,"number",jt),Qt=r=>!!r&&Number.isInteger(Number(r)),ru=r=>r.endsWith("%")&&jt(r.slice(0,-1)),L=r=>pi.test(r),Me=r=>Yc.test(r),su=new Set(["length","size","percentage"]),nu=r=>kt(r,su,gi),iu=r=>kt(r,"position",gi),au=new Set(["image","url"]),ou=r=>kt(r,au,du),lu=r=>kt(r,"",uu),Yt=()=>!0,kt=(r,e,t)=>{const s=pi.exec(r);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},cu=r=>Xc.test(r)&&!Zc.test(r),gi=()=>!1,uu=r=>eu.test(r),du=r=>tu.test(r),hu=Kc(()=>{const r=X("colors"),e=X("spacing"),t=X("blur"),s=X("brightness"),n=X("borderColor"),i=X("borderRadius"),a=X("borderSpacing"),o=X("borderWidth"),l=X("contrast"),u=X("grayscale"),c=X("hueRotate"),h=X("invert"),m=X("gap"),p=X("gradientColorStops"),y=X("gradientColorStopPositions"),x=X("inset"),v=X("margin"),k=X("opacity"),S=X("padding"),j=X("saturate"),T=X("scale"),I=X("sepia"),ee=X("skew"),oe=X("space"),N=X("translate"),_=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto",L,e],E=()=>[L,e],Q=()=>["",Pe,Ue],ge=()=>["auto",jt,L],Je=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],lt=()=>["solid","dashed","dotted","double","none"],ir=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],At=()=>["start","end","center","between","around","evenly","stretch"],Qe=()=>["","0",L],ar=()=>["auto","avoid","all","avoid-page","page","left","right","column"],we=()=>[jt,L];return{cacheSize:500,separator:":",theme:{colors:[Yt],spacing:[Pe,Ue],blur:["none","",Me,L],brightness:we(),borderColor:[r],borderRadius:["none","","full",Me,L],borderSpacing:E(),borderWidth:Q(),contrast:we(),grayscale:Qe(),hueRotate:we(),invert:Qe(),gap:E(),gradientColorStops:[r],gradientColorStopPositions:[ru,Ue],inset:H(),margin:H(),opacity:we(),padding:E(),saturate:we(),scale:we(),sepia:Qe(),skew:we(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",L]}],container:["container"],columns:[{columns:[Me]}],"break-after":[{"break-after":ar()}],"break-before":[{"break-before":ar()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Je(),L]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qt,L]}],basis:[{basis:H()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",L]}],grow:[{grow:Qe()}],shrink:[{shrink:Qe()}],order:[{order:["first","last","none",Qt,L]}],"grid-cols":[{"grid-cols":[Yt]}],"col-start-end":[{col:["auto",{span:["full",Qt,L]},L]}],"col-start":[{"col-start":ge()}],"col-end":[{"col-end":ge()}],"grid-rows":[{"grid-rows":[Yt]}],"row-start-end":[{row:["auto",{span:[Qt,L]},L]}],"row-start":[{"row-start":ge()}],"row-end":[{"row-end":ge()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",L]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",L]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...At()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...At(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...At(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[oe]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[oe]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",L,e]}],"min-w":[{"min-w":[L,e,"min","max","fit"]}],"max-w":[{"max-w":[L,e,"none","full","min","max","fit","prose",{screen:[Me]},Me]}],h:[{h:[L,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[L,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[L,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[L,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Me,Ue]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",bs]}],"font-family":[{font:[Yt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",L]}],"line-clamp":[{"line-clamp":["none",jt,bs]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pe,L]}],"list-image":[{"list-image":["none",L]}],"list-style-type":[{list:["none","disc","decimal",L]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...lt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pe,Ue]}],"underline-offset":[{"underline-offset":["auto",Pe,L]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",L]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",L]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Je(),iu]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",nu]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ou]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[...lt(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:lt()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...lt()]}],"outline-offset":[{"outline-offset":[Pe,L]}],"outline-w":[{outline:[Pe,Ue]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[Pe,Ue]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",Me,lu]}],"shadow-color":[{shadow:[Yt]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":[...ir(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ir()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Me,L]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[h]}],saturate:[{saturate:[j]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",L]}],duration:[{duration:we()}],ease:[{ease:["linear","in","out","in-out",L]}],delay:[{delay:we()}],animate:[{animate:["none","spin","ping","pulse","bounce",L]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[Qt,L]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[ee]}],"skew-y":[{"skew-y":[ee]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",L]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",L]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",L]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[Pe,Ue,bs]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function le(...r){return hu(ai(r))}const fu=ci("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),re=g.forwardRef(({className:r,variant:e,size:t,asChild:s=!1,...n},i)=>{const a=s?Pc:"button";return d.jsx(a,{className:le(fu({variant:e,size:t,className:r})),ref:i,...n})});re.displayName="Button";const ae=g.forwardRef(({className:r,type:e,...t},s)=>d.jsx("input",{type:e,className:le("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...t}));ae.displayName="Input";var mu=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],pu=mu.reduce((r,e)=>{const t=ni(`Primitive.${e}`),s=g.forwardRef((n,i)=>{const{asChild:a,...o}=n,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(l,{...o,ref:i})});return s.displayName=`Primitive.${e}`,{...r,[e]:s}},{}),gu="Label",vi=g.forwardRef((r,e)=>d.jsx(pu.label,{...r,ref:e,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||((n=r.onMouseDown)==null||n.call(r,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));vi.displayName=gu;var yi=vi;const vu=ci("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),G=g.forwardRef(({className:r,...e},t)=>d.jsx(yi,{ref:t,className:le(vu(),r),...e}));G.displayName=yi.displayName;const yu=1,bu=1e6;let ws=0;function wu(){return ws=(ws+1)%Number.MAX_SAFE_INTEGER,ws.toString()}const xs=new Map,bi=r=>{if(xs.has(r))return;const e=setTimeout(()=>{xs.delete(r),Sr({type:"REMOVE_TOAST",toastId:r})},bu);xs.set(r,e)},xu=(r,e)=>{switch(e.type){case"ADD_TOAST":return{...r,toasts:[e.toast,...r.toasts].slice(0,yu)};case"UPDATE_TOAST":return{...r,toasts:r.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?bi(t):r.toasts.forEach(s=>{bi(s.id)}),{...r,toasts:r.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(t=>t.id!==e.toastId)}}},_u=[];let _s={toasts:[]};function Sr(r){_s=xu(_s,r),_u.forEach(e=>{e(_s)})}function B({...r}){const e=wu(),t=n=>Sr({type:"UPDATE_TOAST",toast:{...n,id:e}}),s=()=>Sr({type:"DISMISS_TOAST",toastId:e});return Sr({type:"ADD_TOAST",toast:{...r,id:e,open:!0,onOpenChange:n=>{n||s()}}}),{id:e,dismiss:s,update:t}}const ju=({loginWithEmailPassword:r})=>{const[e,t]=R.useState(""),[s,n]=R.useState(""),[i,a]=R.useState(!1),o=fr(),l=async u=>{u.preventDefault(),a(!0);try{const{data:c,error:h}=await r(e,s);if(h){console.error("Login error:",h),B({title:"Login Failed",description:typeof h=="string"?h:"Invalid credentials or you don't have access to this project.",variant:"destructive"});return}c&&(B({title:"Login Successful",description:"Welcome back!"}),o("/admin"))}catch(c){console.error("Unexpected error:",c),B({title:"Error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{a(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"font-serif text-6xl text-gold",children:"Velour Essence"}),d.jsx("p",{className:"text-black/60 mt-2",children:"Admin Dashboard"})]}),d.jsxs("div",{className:"bg-emerald-light border border-gold/20 rounded-lg shadow-lg p-8",children:[d.jsx("h2",{className:"font-serif text-2xl text-gold mb-6 text-center",children:"Login"}),d.jsxs("form",{onSubmit:l,className:"space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(G,{htmlFor:"email",className:"text-white",children:"Email"}),d.jsx(ae,{id:"email",type:"email",value:e,onChange:u=>t(u.target.value),className:"bg-emerald-light/20 border-gold/30 text-white placeholder-white/50",placeholder:"admin@example.com",required:!0,disabled:i})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"flex justify-between items-center",children:d.jsx(G,{htmlFor:"password",className:"text-white",children:"Password"})}),d.jsx(ae,{id:"password",type:"password",value:s,onChange:u=>n(u.target.value),className:"bg-emerald-light/20 border-gold/30 text-white placeholder-white/50",required:!0,disabled:i})]}),d.jsx(re,{type:"submit",className:"w-full bg-gold text-black hover:bg-gold/90",disabled:i,children:i?d.jsxs("span",{className:"flex items-center",children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):"Sign In"})]}),d.jsx("div",{className:"mt-6 text-center text-white/50 text-sm",children:d.jsx("p",{children:"For testing purposes, please contact the administrator for login credentials."})})]})]})})};var Cr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Xt=typeof window>"u"||"Deno"in globalThis;function Tr(){}function wi(r){return typeof r=="number"&&r>=0&&r!==1/0}function ku(r,e){return Math.max(r+(e||0)-Date.now(),0)}function Nr(r,e){return typeof r=="function"?r(e):r}function Ce(r,e){return typeof r=="function"?r(e):r}function xi(r){return JSON.stringify(r,(e,t)=>ks(t)?Object.keys(t).sort().reduce((s,n)=>(s[n]=t[n],s),{}):t)}function js(r,e){if(r===e)return r;const t=_i(r)&&_i(e);if(t||ks(r)&&ks(e)){const s=t?r:Object.keys(r),n=s.length,i=t?e:Object.keys(e),a=i.length,o=t?[]:{};let l=0;for(let u=0;u<a;u++){const c=t?u:i[u];(!t&&s.includes(c)||t)&&r[c]===void 0&&e[c]===void 0?(o[c]=void 0,l++):(o[c]=js(r[c],e[c]),o[c]===r[c]&&r[c]!==void 0&&l++)}return n===a&&l===n?r:o}return e}function Pr(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}function _i(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function ks(r){if(!ji(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!ji(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function ji(r){return Object.prototype.toString.call(r)==="[object Object]"}function ki(r,e,t){if(typeof t.structuralSharing=="function")return t.structuralSharing(r,e);if(t.structuralSharing!==!1){if(process.env.NODE_ENV!=="production")try{return js(r,e)}catch(s){throw console.error(`Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${t.queryHash}]: ${s}`),s}return js(r,e)}return e}function Ei(r,e){return typeof r=="function"?r(...e):!!r}var Eu=(Fi=class extends Cr{constructor(){super();W(this,nt);W(this,Be);W(this,St);D(this,St,e=>{if(!Xt&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){b(this,Be)||this.setEventListener(b(this,St))}onUnsubscribe(){var e;this.hasListeners()||((e=b(this,Be))==null||e.call(this),D(this,Be,void 0))}setEventListener(e){var t;D(this,St,e),(t=b(this,Be))==null||t.call(this),D(this,Be,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){b(this,nt)!==e&&(D(this,nt,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof b(this,nt)=="boolean"?b(this,nt):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},nt=new WeakMap,Be=new WeakMap,St=new WeakMap,Fi),Su=new Eu,Cu=(Ui=class extends Cr{constructor(){super();W(this,Ct,!0);W(this,ze);W(this,Tt);D(this,Tt,e=>{if(!Xt&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){b(this,ze)||this.setEventListener(b(this,Tt))}onUnsubscribe(){var e;this.hasListeners()||((e=b(this,ze))==null||e.call(this),D(this,ze,void 0))}setEventListener(e){var t;D(this,Tt,e),(t=b(this,ze))==null||t.call(this),D(this,ze,e(this.setOnline.bind(this)))}setOnline(e){b(this,Ct)!==e&&(D(this,Ct,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return b(this,Ct)}},Ct=new WeakMap,ze=new WeakMap,Tt=new WeakMap,Ui),Tu=new Cu;function Si(){let r,e;const t=new Promise((n,i)=>{r=n,e=i});t.status="pending",t.catch(()=>{});function s(n){Object.assign(t,n),delete t.resolve,delete t.reject}return t.resolve=n=>{s({status:"fulfilled",value:n}),r(n)},t.reject=n=>{s({status:"rejected",reason:n}),e(n)},t}function Nu(r){return(r??"online")==="online"?Tu.isOnline():!0}var Pu=r=>setTimeout(r,0);function Ru(){let r=[],e=0,t=o=>{o()},s=o=>{o()},n=Pu;const i=o=>{e?r.push(o):n(()=>{t(o)})},a=()=>{const o=r;r=[],o.length&&n(()=>{s(()=>{o.forEach(l=>{t(l)})})})};return{batch:o=>{let l;e++;try{l=o()}finally{e--,e||a()}return l},batchCalls:o=>(...l)=>{i(()=>{o(...l)})},schedule:i,setNotifyFunction:o=>{t=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{n=o}}}var Rr=Ru();function Ou(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Nu(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function Au(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Lu=(Mi=class extends Cr{constructor(e,t){super();W(this,z);W(this,me);W(this,M);W(this,sr);W(this,ue);W(this,it);W(this,Nt);W(this,Ve);W(this,We);W(this,nr);W(this,Pt);W(this,Rt);W(this,at);W(this,ot);W(this,Ge);W(this,Ot,new Set);this.options=t,D(this,me,e),D(this,We,null),D(this,Ve,Si()),this.options.experimental_prefetchInRender||b(this,Ve).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(b(this,M).addObserver(this),Ci(b(this,M),this.options)?Z(this,z,lr).call(this):this.updateResult(),Z(this,z,Gs).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Es(b(this,M),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Es(b(this,M),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Z(this,z,Hs).call(this),Z(this,z,Ks).call(this),b(this,M).removeObserver(this)}setOptions(e){const t=this.options,s=b(this,M);if(this.options=b(this,me).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ce(this.options.enabled,b(this,M))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Z(this,z,Js).call(this),b(this,M).setOptions(this.options),t._defaulted&&!Pr(this.options,t)&&b(this,me).getQueryCache().notify({type:"observerOptionsUpdated",query:b(this,M),observer:this});const n=this.hasListeners();n&&Ti(b(this,M),s,this.options,t)&&Z(this,z,lr).call(this),this.updateResult(),n&&(b(this,M)!==s||Ce(this.options.enabled,b(this,M))!==Ce(t.enabled,b(this,M))||Nr(this.options.staleTime,b(this,M))!==Nr(t.staleTime,b(this,M)))&&Z(this,z,zs).call(this);const i=Z(this,z,Vs).call(this);n&&(b(this,M)!==s||Ce(this.options.enabled,b(this,M))!==Ce(t.enabled,b(this,M))||i!==b(this,Ge))&&Z(this,z,Ws).call(this,i)}getOptimisticResult(e){const t=b(this,me).getQueryCache().build(b(this,me),e),s=this.createResult(t,e);return Iu(this,s)&&(D(this,ue,s),D(this,Nt,this.options),D(this,it,b(this,M).state)),s}getCurrentResult(){return b(this,ue)}trackResult(e,t){return new Proxy(e,{get:(s,n)=>(this.trackProp(n),t==null||t(n),Reflect.get(s,n))})}trackProp(e){b(this,Ot).add(e)}getCurrentQuery(){return b(this,M)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=b(this,me).defaultQueryOptions(e),s=b(this,me).getQueryCache().build(b(this,me),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return Z(this,z,lr).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),b(this,ue)))}createResult(e,t){var _;const s=b(this,M),n=this.options,i=b(this,ue),a=b(this,it),o=b(this,Nt),u=e!==s?e.state:b(this,sr),{state:c}=e;let h={...c},m=!1,p;if(t._optimisticResults){const P=this.hasListeners(),H=!P&&Ci(e,t),E=P&&Ti(e,s,t,n);(H||E)&&(h={...h,...Ou(c.data,e.options)}),t._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:y,errorUpdatedAt:x,status:v}=h;p=h.data;let k=!1;if(t.placeholderData!==void 0&&p===void 0&&v==="pending"){let P;i!=null&&i.isPlaceholderData&&t.placeholderData===(o==null?void 0:o.placeholderData)?(P=i.data,k=!0):P=typeof t.placeholderData=="function"?t.placeholderData((_=b(this,Rt))==null?void 0:_.state.data,b(this,Rt)):t.placeholderData,P!==void 0&&(v="success",p=ki(i==null?void 0:i.data,P,t),m=!0)}if(t.select&&p!==void 0&&!k)if(i&&p===(a==null?void 0:a.data)&&t.select===b(this,nr))p=b(this,Pt);else try{D(this,nr,t.select),p=t.select(p),p=ki(i==null?void 0:i.data,p,t),D(this,Pt,p),D(this,We,null)}catch(P){D(this,We,P)}b(this,We)&&(y=b(this,We),p=b(this,Pt),x=Date.now(),v="error");const S=h.fetchStatus==="fetching",j=v==="pending",T=v==="error",I=j&&S,ee=p!==void 0,N={status:v,fetchStatus:h.fetchStatus,isPending:j,isSuccess:v==="success",isError:T,isInitialLoading:I,isLoading:I,data:p,dataUpdatedAt:h.dataUpdatedAt,error:y,errorUpdatedAt:x,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:S,isRefetching:S&&!j,isLoadingError:T&&!ee,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:T&&ee,isStale:Ss(e,t),refetch:this.refetch,promise:b(this,Ve)};if(this.options.experimental_prefetchInRender){const P=Q=>{N.status==="error"?Q.reject(N.error):N.data!==void 0&&Q.resolve(N.data)},H=()=>{const Q=D(this,Ve,N.promise=Si());P(Q)},E=b(this,Ve);switch(E.status){case"pending":e.queryHash===s.queryHash&&P(E);break;case"fulfilled":(N.status==="error"||N.data!==E.value)&&H();break;case"rejected":(N.status!=="error"||N.error!==E.reason)&&H();break}}return N}updateResult(){const e=b(this,ue),t=this.createResult(b(this,M),this.options);if(D(this,it,b(this,M).state),D(this,Nt,this.options),b(this,it).data!==void 0&&D(this,Rt,b(this,M)),Pr(t,e))return;D(this,ue,t);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!b(this,Ot).size)return!0;const a=new Set(i??b(this,Ot));return this.options.throwOnError&&a.add("error"),Object.keys(b(this,ue)).some(o=>{const l=o;return b(this,ue)[l]!==e[l]&&a.has(l)})};Z(this,z,aa).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Z(this,z,Gs).call(this)}},me=new WeakMap,M=new WeakMap,sr=new WeakMap,ue=new WeakMap,it=new WeakMap,Nt=new WeakMap,Ve=new WeakMap,We=new WeakMap,nr=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,at=new WeakMap,ot=new WeakMap,Ge=new WeakMap,Ot=new WeakMap,z=new WeakSet,lr=function(e){Z(this,z,Js).call(this);let t=b(this,M).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Tr)),t},zs=function(){Z(this,z,Hs).call(this);const e=Nr(this.options.staleTime,b(this,M));if(Xt||b(this,ue).isStale||!wi(e))return;const s=ku(b(this,ue).dataUpdatedAt,e)+1;D(this,at,setTimeout(()=>{b(this,ue).isStale||this.updateResult()},s))},Vs=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(b(this,M)):this.options.refetchInterval)??!1},Ws=function(e){Z(this,z,Ks).call(this),D(this,Ge,e),!(Xt||Ce(this.options.enabled,b(this,M))===!1||!wi(b(this,Ge))||b(this,Ge)===0)&&D(this,ot,setInterval(()=>{(this.options.refetchIntervalInBackground||Su.isFocused())&&Z(this,z,lr).call(this)},b(this,Ge)))},Gs=function(){Z(this,z,zs).call(this),Z(this,z,Ws).call(this,Z(this,z,Vs).call(this))},Hs=function(){b(this,at)&&(clearTimeout(b(this,at)),D(this,at,void 0))},Ks=function(){b(this,ot)&&(clearInterval(b(this,ot)),D(this,ot,void 0))},Js=function(){const e=b(this,me).getQueryCache().build(b(this,me),this.options);if(e===b(this,M))return;const t=b(this,M);D(this,M,e),D(this,sr,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},aa=function(e){Rr.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(b(this,ue))}),b(this,me).getQueryCache().notify({query:b(this,M),type:"observerResultsUpdated"})})},Mi);function $u(r,e){return Ce(e.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&e.retryOnMount===!1)}function Ci(r,e){return $u(r,e)||r.state.data!==void 0&&Es(r,e,e.refetchOnMount)}function Es(r,e,t){if(Ce(e.enabled,r)!==!1){const s=typeof t=="function"?t(r):t;return s==="always"||s!==!1&&Ss(r,e)}return!1}function Ti(r,e,t,s){return(r!==e||Ce(s.enabled,r)===!1)&&(!t.suspense||r.state.status!=="error")&&Ss(r,t)}function Ss(r,e){return Ce(e.enabled,r)!==!1&&r.isStaleByTime(Nr(e.staleTime,r))}function Iu(r,e){return!Pr(r.getCurrentResult(),e)}var Du=(qi=class extends Cr{constructor(e,t){super();W(this,Oe);W(this,He);W(this,Ke);W(this,pe);W(this,Re);D(this,He,e),this.setOptions(t),this.bindMethods(),Z(this,Oe,Dr).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var s;const t=this.options;this.options=b(this,He).defaultMutationOptions(e),Pr(this.options,t)||b(this,He).getMutationCache().notify({type:"observerOptionsUpdated",mutation:b(this,pe),observer:this}),t!=null&&t.mutationKey&&this.options.mutationKey&&xi(t.mutationKey)!==xi(this.options.mutationKey)?this.reset():((s=b(this,pe))==null?void 0:s.state.status)==="pending"&&b(this,pe).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=b(this,pe))==null||e.removeObserver(this)}onMutationUpdate(e){Z(this,Oe,Dr).call(this),Z(this,Oe,Qs).call(this,e)}getCurrentResult(){return b(this,Ke)}reset(){var e;(e=b(this,pe))==null||e.removeObserver(this),D(this,pe,void 0),Z(this,Oe,Dr).call(this),Z(this,Oe,Qs).call(this)}mutate(e,t){var s;return D(this,Re,t),(s=b(this,pe))==null||s.removeObserver(this),D(this,pe,b(this,He).getMutationCache().build(b(this,He),this.options)),b(this,pe).addObserver(this),b(this,pe).execute(e)}},He=new WeakMap,Ke=new WeakMap,pe=new WeakMap,Re=new WeakMap,Oe=new WeakSet,Dr=function(){var t;const e=((t=b(this,pe))==null?void 0:t.state)??Au();D(this,Ke,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},Qs=function(e){Rr.batch(()=>{var t,s,n,i,a,o,l,u;if(b(this,Re)&&this.hasListeners()){const c=b(this,Ke).variables,h=b(this,Ke).context;(e==null?void 0:e.type)==="success"?((s=(t=b(this,Re)).onSuccess)==null||s.call(t,e.data,c,h),(i=(n=b(this,Re)).onSettled)==null||i.call(n,e.data,null,c,h)):(e==null?void 0:e.type)==="error"&&((o=(a=b(this,Re)).onError)==null||o.call(a,e.error,c,h),(u=(l=b(this,Re)).onSettled)==null||u.call(l,void 0,e.error,c,h))}this.listeners.forEach(c=>{c(b(this,Ke))})})},qi),Fu=g.createContext(void 0),Et=r=>{const e=g.useContext(Fu);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Ni=g.createContext(!1),Uu=()=>g.useContext(Ni);Ni.Provider;function Mu(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var qu=g.createContext(Mu()),Bu=()=>g.useContext(qu),zu=(r,e)=>{(r.suspense||r.throwOnError||r.experimental_prefetchInRender)&&(e.isReset()||(r.retryOnMount=!1))},Vu=r=>{g.useEffect(()=>{r.clearReset()},[r])},Wu=({result:r,errorResetBoundary:e,throwOnError:t,query:s,suspense:n})=>r.isError&&!e.isReset()&&!r.isFetching&&s&&(n&&r.data===void 0||Ei(t,[r.error,s])),Gu=r=>{const e=r.staleTime;r.suspense&&(r.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3)))},Hu=(r,e)=>r.isLoading&&r.isFetching&&!e,Ku=(r,e)=>(r==null?void 0:r.suspense)&&e.isPending,Pi=(r,e,t)=>e.fetchOptimistic(r).catch(()=>{t.clearReset()});function Ju(r,e,t){var h,m,p,y,x;if(process.env.NODE_ENV!=="production"&&(typeof r!="object"||Array.isArray(r)))throw new Error('Bad argument type. Starting with v5, only the "Object" form is allowed when calling query related functions. Please use the error stack to find the culprit call. More info here: https://tanstack.com/query/latest/docs/react/guides/migrating-to-v5#supports-a-single-signature-one-object');const s=Et(),n=Uu(),i=Bu(),a=s.defaultQueryOptions(r);(m=(h=s.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,a),process.env.NODE_ENV!=="production"&&(a.queryFn||console.error(`[${a.queryHash}]: No queryFn was passed as an option, and no default queryFn was found. The queryFn parameter is only optional when using a default queryFn. More info here: https://tanstack.com/query/latest/docs/framework/react/guides/default-query-function`)),a._optimisticResults=n?"isRestoring":"optimistic",Gu(a),zu(a,i),Vu(i);const o=!s.getQueryCache().get(a.queryHash),[l]=g.useState(()=>new e(s,a)),u=l.getOptimisticResult(a),c=!n&&r.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(v=>{const k=c?l.subscribe(Rr.batchCalls(v)):Tr;return l.updateResult(),k},[l,c]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),g.useEffect(()=>{l.setOptions(a)},[a,l]),Ku(a,u))throw Pi(a,l,i);if(Wu({result:u,errorResetBoundary:i,throwOnError:a.throwOnError,query:s.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw u.error;if((y=(p=s.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||y.call(p,a,u),a.experimental_prefetchInRender&&!Xt&&Hu(u,n)){const v=o?Pi(a,l,i):(x=s.getQueryCache().get(a.queryHash))==null?void 0:x.promise;v==null||v.catch(Tr).finally(()=>{l.updateResult()})}return a.notifyOnChangeProps?u:l.trackResult(u)}function qe(r,e){return Ju(r,Lu)}function be(r,e){const t=Et(),[s]=g.useState(()=>new Du(t,r));g.useEffect(()=>{s.setOptions(r)},[s,r]);const n=g.useSyncExternalStore(g.useCallback(a=>s.subscribe(Rr.batchCalls(a)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=g.useCallback((a,o)=>{s.mutate(a,o).catch(Tr)},[s]);if(n.error&&Ei(s.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}const Cs=768;function Qu(){const[r,e]=g.useState(void 0);return g.useEffect(()=>{const t=window.matchMedia(`(max-width: ${Cs-1}px)`),s=()=>{e(window.innerWidth<Cs)};return t.addEventListener("change",s),e(window.innerWidth<Cs),()=>t.removeEventListener("change",s)},[]),!!r}const Ri=R.createContext(void 0),Yu=({children:r,logout:e,config:t})=>d.jsx(Ri.Provider,{value:{logout:e,config:t},children:r}),Xu=()=>{const r=R.useContext(Ri);if(!r)throw new Error("useAdminContext must be used within an AdminProvider");return r},Zt=({children:r,title:e})=>{const[t,s]=R.useState(!1),n=fr(),i=Ae(),a=Qu(),{logout:o}=Xu();R.useEffect(()=>{a&&s(!1)},[i.pathname,a]);const l=async()=>{try{const{error:c}=await o();if(c)throw c;B({title:"Logged out successfully"}),n("/auth/login")}catch(c){console.error("Logout failed:",c),B({title:"Error",description:"Failed to log out. Please try again.",variant:"destructive"})}},u=[{name:"Dashboard",path:"/admin",icon:"home"},{name:"Products",path:"/admin/products",icon:"box"},{name:"Articles",path:"/admin/articles",icon:"file-text"},{name:"Gallery",path:"/admin/gallery",icon:"image"},{name:"Testimonials",path:"/admin/testimonials",icon:"message-square"}];return d.jsxs("div",{className:"min-h-screen bg-background text-white flex flex-col md:flex-row",children:[d.jsxs("header",{className:"bg-emerald-light border-b border-white/10 p-4 flex justify-between items-center md:hidden",children:[d.jsx("div",{className:"font-serif text-gold text-xl",children:"Velour Admin"}),d.jsx(re,{variant:"ghost",size:"icon",className:"text-white",onClick:()=>s(!t),children:d.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t?d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})]}),d.jsxs("aside",{className:`bg-emerald-light w-full md:w-64 flex-shrink-0 border-r border-white/10 md:flex flex-col 
                    ${a?t?"fixed inset-0 z-50 block":"hidden":"flex"}`,children:[d.jsx("div",{className:"p-6 border-b border-white/10",children:d.jsx(Ze,{to:"/admin",className:"font-serif text-gold text-xl flex items-center",children:"Velour Essence"})}),d.jsx("nav",{className:"flex-1 p-4 space-y-1",children:u.map(c=>d.jsxs(Ze,{to:c.path,className:`flex items-center px-4 py-3 rounded-lg transition-colors ${i.pathname===c.path?"bg-emerald text-gold":"text-white/70 hover:bg-emerald/50"}`,children:[d.jsxs("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.icon==="home"&&d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"}),c.icon==="box"&&d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0v10a2 2 0 01-2 2H6a2 2 0 01-2-2V7m16 0l-8 4m-8-4l8 4"}),c.icon==="file-text"&&d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}),c.icon==="image"&&d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}),c.icon==="message-square"&&d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})]}),d.jsx("span",{children:c.name})]},c.path))}),d.jsx("div",{className:"p-4 border-t border-white/10",children:d.jsxs(re,{variant:"ghost",className:"w-full justify-start text-white/70 hover:text-white hover:bg-emerald/50",onClick:l,children:[d.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),d.jsx("span",{children:"Sign Out"})]})})]}),d.jsx("main",{className:"flex-1 overflow-y-auto bg-background",children:d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx("h1",{className:"font-serif text-2xl md:text-3xl text-gold",children:e}),d.jsx("div",{className:"w-16 h-1 bg-gold/30 mt-3"})]}),r]})})]})},Oi=g.forwardRef(({className:r,...e},t)=>d.jsx("div",{className:"relative w-full overflow-auto",children:d.jsx("table",{ref:t,className:le("w-full caption-bottom text-sm",r),...e})}));Oi.displayName="Table";const Ai=g.forwardRef(({className:r,...e},t)=>d.jsx("thead",{ref:t,className:le("[&_tr]:border-b",r),...e}));Ai.displayName="TableHeader";const Li=g.forwardRef(({className:r,...e},t)=>d.jsx("tbody",{ref:t,className:le("[&_tr:last-child]:border-0",r),...e}));Li.displayName="TableBody";const Zu=g.forwardRef(({className:r,...e},t)=>d.jsx("tfoot",{ref:t,className:le("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...e}));Zu.displayName="TableFooter";const er=g.forwardRef(({className:r,...e},t)=>d.jsx("tr",{ref:t,className:le("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...e}));er.displayName="TableRow";const Ts=g.forwardRef(({className:r,...e},t)=>d.jsx("th",{ref:t,className:le("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...e}));Ts.displayName="TableHead";const tr=g.forwardRef(({className:r,...e},t)=>d.jsx("td",{ref:t,className:le("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...e}));tr.displayName="TableCell";const ed=g.forwardRef(({className:r,...e},t)=>d.jsx("caption",{ref:t,className:le("mt-4 text-sm text-muted-foreground",r),...e}));ed.displayName="TableCaption";function Or({columns:r,data:e,onEdit:t,onDelete:s,isLoading:n=!1}){return d.jsx("div",{className:"w-full overflow-x-auto rounded-lg border border-emerald/50",children:d.jsxs(Oi,{children:[d.jsx(Ai,{children:d.jsxs(er,{className:"bg-emerald-light hover:bg-emerald-light",children:[r.map(i=>d.jsx(Ts,{className:"text-gold font-serif",style:i.width?{width:i.width}:{},children:i.header},i.key)),d.jsx(Ts,{className:"text-gold font-serif text-right",children:"Actions"})]})}),d.jsx(Li,{children:n?d.jsx(er,{children:d.jsx(tr,{colSpan:r.length+1,className:"text-center py-10",children:d.jsx("div",{className:"flex justify-center",children:d.jsx("div",{className:"w-8 h-8 border-2 border-gold border-t-transparent rounded-full animate-spin"})})})}):e.length===0?d.jsx(er,{children:d.jsx(tr,{colSpan:r.length+1,className:"text-center py-10 text-black",children:"No items found"})}):e.map(i=>d.jsxs(er,{className:"border-b border-emerald/30 hover:bg-emerald-light/20 text-black/60",children:[r.map(a=>d.jsx(tr,{children:a.render?a.render(i[a.key],i):i[a.key]},`${i.id}-${a.key}`)),d.jsx(tr,{className:"text-right",children:d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsxs(re,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-gold",onClick:()=>t(i),children:[d.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),d.jsx("span",{className:"sr-only",children:"Edit"})]}),d.jsxs(re,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-burgundy",onClick:()=>s(i),children:[d.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),d.jsx("span",{className:"sr-only",children:"Delete"})]})]})})]},i.id))})]})})}const td=({query:r})=>{const{getGalleryItems:e,createGalleryItem:t,deleteGalleryItem:s,updateGalleryItem:n}=r,[i,a]=R.useState(!1),[o,l]=R.useState(null),[u,c]=R.useState({title:"",image_url:"",category:"",is_featured:!1}),h=Et(),{data:m,isLoading:p}=qe({queryKey:["admin-gallery"],queryFn:e}),y=be({mutationFn:t,onSuccess:()=>{h.invalidateQueries({queryKey:["admin-gallery"]}),B({title:"Gallery item created successfully"}),ee()},onError:N=>{console.error("Failed to create gallery item:",N),B({title:"Error",description:"Failed to create gallery item. Please try again.",variant:"destructive"})}}),x=be({mutationFn:({id:N,updates:_})=>n(N,_),onSuccess:()=>{h.invalidateQueries({queryKey:["admin-gallery"]}),B({title:"Gallery item updated successfully"}),ee()},onError:N=>{console.error("Failed to update gallery item:",N),B({title:"Error",description:"Failed to update gallery item. Please try again.",variant:"destructive"})}}),v=be({mutationFn:s,onSuccess:()=>{h.invalidateQueries({queryKey:["admin-gallery"]}),B({title:"Gallery item deleted successfully"})},onError:N=>{console.error("Failed to delete gallery item:",N),B({title:"Error",description:"Failed to delete gallery item. Please try again.",variant:"destructive"})}}),k=N=>{const{name:_,value:P,type:H,checked:E}=N.target;c(H==="checkbox"?{...u,[_]:E}:{...u,[_]:P})},S=N=>{N.preventDefault(),y.mutate(u)},j=N=>{N.preventDefault(),o&&x.mutate({id:o.id,updates:u})},T=N=>{l(N),c({title:N.title,image_url:N.image_url,category:N.category,is_featured:N.is_featured||!1}),a(!0),window.scrollTo({top:0,behavior:"smooth"})},I=N=>{confirm("Are you sure you want to delete this gallery item?")&&v.mutate(N.id)},ee=()=>{l(null),c({title:"",image_url:"",category:"",is_featured:!1}),a(!1)},oe=[{key:"image_url",header:"Image",width:"80px",render:N=>d.jsx("div",{className:"w-12 h-12 rounded overflow-hidden",children:d.jsx("img",{src:N,alt:"Preview",className:"w-full h-full object-cover",onError:_=>{_.target.src="https://via.placeholder.com/48?text=Error"}})})},{key:"title",header:"Title"},{key:"category",header:"Category",render:N=>d.jsx("div",{className:"px-2 py-1 rounded-full bg-emerald/20 text-xs inline-block",children:N})},{key:"is_featured",header:"Featured",render:N=>d.jsx("div",{className:N?"text-gold":"text-emerald/40",children:N?d.jsx("svg",{className:"w-5 h-5 fill-current",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}):"—"})}];return d.jsx(Zt,{title:"Manage Gallery",children:d.jsxs("div",{className:"space-y-8",children:[d.jsx("div",{className:"mb-8",children:i?d.jsxs("div",{className:"bg-emerald-light rounded-lg border border-gold/20 p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"font-serif text-xl text-gold",children:o?"Edit Gallery Item":"Add New Gallery Item"}),d.jsx(re,{variant:"ghost",size:"sm",onClick:ee,className:"text-white/70 hover:text-white",children:"Cancel"})]}),d.jsx("form",{onSubmit:o?j:S,children:d.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(G,{htmlFor:"title",className:"text-white",children:"Title"}),d.jsx(ae,{id:"title",name:"title",value:u.title,onChange:k,className:"bg-emerald-gold/20 border-gold/30 text-black",required:!0})]}),d.jsxs("div",{children:[d.jsx(G,{htmlFor:"image_url",className:"text-white",children:"Image URL"}),d.jsx(ae,{id:"image_url",name:"image_url",value:u.image_url,onChange:k,className:"bg-emerald-gold/20 border-gold/30 text-black",placeholder:"https://example.com/image.jpg",required:!0})]}),d.jsxs("div",{children:[d.jsx(G,{htmlFor:"category",className:"text-white",children:"Category"}),d.jsx(ae,{id:"category",name:"category",value:u.category,onChange:k,className:"bg-emerald-gold/20 border-gold/30 text-black",required:!0})]}),d.jsxs("div",{className:"flex items-center mt-4",children:[d.jsx("input",{type:"checkbox",id:"is_featured",name:"is_featured",checked:u.is_featured,onChange:k,className:"w-4 h-4 mr-2"}),d.jsx(G,{htmlFor:"is_featured",className:"text-white",children:"Featured item"})]}),d.jsx("div",{className:"flex gap-4 pt-4",children:d.jsx(re,{type:"submit",className:"bg-gold text-black hover:bg-gold/90",disabled:y.isPending||x.isPending,children:y.isPending||x.isPending?d.jsxs("div",{className:"flex items-center",children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):o?"Update Item":"Create Item"})})]}),d.jsx("div",{className:"flex flex-col items-center justify-center bg-emerald-light/5 rounded-lg p-4",children:u.image_url?d.jsxs("div",{className:"max-w-full",children:[d.jsx("img",{src:u.image_url,alt:"Image Preview",className:"max-h-64 rounded-lg object-contain mx-auto",onError:N=>{N.target.src="https://via.placeholder.com/400x300?text=Image+Error"}}),d.jsx("p",{className:"text-sm text-white/50 text-center mt-2",children:"Image Preview"})]}):d.jsxs("div",{className:"text-center text-white/50",children:[d.jsx("svg",{className:"w-12 h-12 mx-auto opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),d.jsx("p",{className:"mt-2",children:"Enter an image URL to see preview"})]})})]})})]}):d.jsxs(re,{onClick:()=>a(!0),className:"bg-gold text-black hover:bg-gold/90",children:[d.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add Gallery Item"]})}),d.jsxs("div",{children:[d.jsx("h2",{className:"font-serif text-xl text-gold mb-4",children:"All Gallery Items"}),d.jsx(Or,{columns:oe,data:(m==null?void 0:m.data)||[],onEdit:T,onDelete:I,isLoading:p})]})]})})},rd=({query:r})=>{var N;const{getAllProducts:e,createProduct:t,deleteProduct:s,updateProduct:n}=r,[i,a]=R.useState(!1),[o,l]=R.useState(null),[u,c]=R.useState({name:"",description:"",price:0,images:[""],is_active:!0}),h=Et(),{data:m,isLoading:p}=qe({queryKey:["admin-products"],queryFn:e}),y=be({mutationFn:t,onSuccess:()=>{h.invalidateQueries({queryKey:["admin-products"]}),B({title:"Product created successfully"}),ee()},onError:_=>{console.error("Failed to create product:",_),B({title:"Error",description:"Failed to create product. Please try again.",variant:"destructive"})}}),x=be({mutationFn:({id:_,updates:P})=>n(_,P),onSuccess:()=>{h.invalidateQueries({queryKey:["admin-products"]}),B({title:"Product updated successfully"}),ee()},onError:_=>{console.error("Failed to update product:",_),B({title:"Error",description:"Failed to update product. Please try again.",variant:"destructive"})}}),v=be({mutationFn:s,onSuccess:()=>{h.invalidateQueries({queryKey:["admin-products"]}),B({title:"Product deleted successfully"})},onError:_=>{console.error("Failed to delete product:",_),B({title:"Error",description:"Failed to delete product. Please try again.",variant:"destructive"})}}),k=_=>{const{name:P,value:H,type:E}=_.target;c(P==="price"?{...u,[P]:Number(H)}:P==="is_active"?{...u,[P]:_.target.checked}:P==="images[0]"?{...u,images:[H]}:{...u,[P]:H})},S=_=>{_.preventDefault(),y.mutate(u)},j=_=>{_.preventDefault(),o&&x.mutate({id:o.id,updates:u})},T=_=>{l(_),c({name:_.name,description:_.description||"",price:_.price,images:_.images||[""],is_active:_.is_active!==null?_.is_active:!0}),a(!0),window.scrollTo({top:0,behavior:"smooth"})},I=_=>{confirm("Are you sure you want to delete this product?")&&v.mutate(_.id)},ee=()=>{l(null),c({name:"",description:"",price:0,images:[""],is_active:!0}),a(!1)},oe=[{key:"name",header:"Name"},{key:"description",header:"Description",render:_=>d.jsx("div",{className:"max-w-xs truncate ",children:_||"—"})},{key:"price",header:"Price",render:_=>d.jsx("div",{children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(_)})},{key:"is_active",header:"Status",render:_=>d.jsxs("div",{className:`px-2 py-1 rounded-full text-xs inline-flex items-center ${_?"bg-emerald/20 text-emerald":"bg-red-500/20 text-red-500"}`,children:[d.jsx("span",{className:`w-2 h-2 rounded-full mr-1 ${_?"bg-emerald":"bg-red-500"}`}),_?"Active":"Inactive"]})}];return d.jsx(Zt,{title:"Manage Products",children:d.jsxs("div",{className:"space-y-8",children:[d.jsx("div",{className:"mb-8",children:i?d.jsxs("div",{className:"bg-emerald-light rounded-lg border border-gold/20 p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"font-serif text-xl text-gold",children:o?"Edit Product":"Add New Product"}),d.jsx(re,{variant:"ghost",size:"sm",onClick:ee,className:"text-white/70 hover:text-white",children:"Cancel"})]}),d.jsx("form",{onSubmit:o?j:S,children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(G,{htmlFor:"name",className:"text-white",children:"Product Name"}),d.jsx(ae,{id:"name",name:"name",value:u.name,onChange:k,className:"bg-emerald-gold/20 border-gold/30 text-black",required:!0})]}),d.jsxs("div",{children:[d.jsx(G,{htmlFor:"description",className:"text-white",children:"Description"}),d.jsx("textarea",{id:"description",name:"description",value:u.description,onChange:k,className:"w-full rounded-md bg-emerald-gold/20 border-gold/30 text-black h-24 px-3 py-2"})]}),d.jsxs("div",{children:[d.jsx(G,{htmlFor:"price",className:"text-white",children:"Price (IDR)"}),d.jsx(ae,{id:"price",name:"price",type:"number",min:"0",value:u.price,onChange:k,className:"bg-emerald-gold/20 border-gold/30 text-black",required:!0})]}),d.jsxs("div",{children:[d.jsx(G,{htmlFor:"image",className:"text-white",children:"Image URL"}),d.jsx(ae,{id:"image",name:"images[0]",value:((N=u.images)==null?void 0:N[0])||"",onChange:k,className:"bg-emerald-gold/20 border-gold/30 text-black",placeholder:"https://example.com/image.jpg"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"is_active",name:"is_active",checked:u.is_active,onChange:_=>c({...u,is_active:_.target.checked}),className:"w-4 h-4 mr-2"}),d.jsx(G,{htmlFor:"is_active",className:"text-white",children:"Active product"})]}),d.jsx("div",{className:"flex gap-4 pt-2",children:d.jsx(re,{type:"submit",className:"bg-gold text-black hover:bg-gold/90",disabled:y.isPending||x.isPending,children:y.isPending||x.isPending?d.jsxs("div",{className:"flex items-center",children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):o?"Update Product":"Create Product"})})]})})]}):d.jsxs(re,{onClick:()=>a(!0),className:"bg-gold text-black hover:bg-gold/90",children:[d.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add New Product"]})}),d.jsxs("div",{children:[d.jsx("h2",{className:"font-serif text-xl text-gold mb-4",children:"All Products"}),d.jsx(Or,{columns:oe,data:(m==null?void 0:m.data)||[],onEdit:T,onDelete:I,isLoading:p})]})]})})},sd=({query:r})=>{const{createArticle:e,getAllArticles:t,deleteArticle:s,updateArticle:n,updateArticleStatus:i}=r,[a,o]=R.useState(!1),[l,u]=R.useState(null),[c,h]=R.useState({title:"",slug:"",excerpt:"",content:"",cover_image:"",author_name:"",status:"draft",category:""}),m=Et(),{data:p,isLoading:y}=qe({queryKey:["admin-articles"],queryFn:t}),x=be({mutationFn:e,onSuccess:()=>{m.invalidateQueries({queryKey:["admin-articles"]}),B({title:"Article created successfully"}),P()},onError:E=>{console.error("Failed to create article:",E),B({title:"Error",description:"Failed to create article. Please try again.",variant:"destructive"})}}),v=be({mutationFn:({id:E,updates:Q})=>n(E,Q),onSuccess:()=>{m.invalidateQueries({queryKey:["admin-articles"]}),B({title:"Article updated successfully"}),P()},onError:E=>{console.error("Failed to update article:",E),B({title:"Error",description:"Failed to update article. Please try again.",variant:"destructive"})}}),k=be({mutationFn:s,onSuccess:()=>{m.invalidateQueries({queryKey:["admin-articles"]}),B({title:"Article deleted successfully"})},onError:E=>{console.error("Failed to delete article:",E),B({title:"Error",description:"Failed to delete article. Please try again.",variant:"destructive"})}}),S=be({mutationFn:({id:E,status:Q})=>i(E,Q),onSuccess:()=>{m.invalidateQueries({queryKey:["admin-articles"]}),B({title:"Article status updated"})},onError:E=>{console.error("Failed to update article status:",E),B({title:"Error",description:"Failed to update article status. Please try again.",variant:"destructive"})}}),j=E=>{const{name:Q,value:ge}=E.target;h({...c,[Q]:ge})},T=()=>{if(c.title){const E=c.title.toLowerCase().replace(/[^\w\s]/gi,"").replace(/\s+/g,"-");h({...c,slug:E})}},I=E=>{E.preventDefault(),x.mutate(c)},ee=E=>{E.preventDefault(),l&&v.mutate({id:l.id,updates:c})},oe=E=>{u(E),h({title:E.title,slug:E.slug,excerpt:E.excerpt,content:E.content,cover_image:E.cover_image,author_name:E.author_name,status:E.status,category:E.category||""}),o(!0),window.scrollTo({top:0,behavior:"smooth"})},N=E=>{confirm("Are you sure you want to delete this article?")&&k.mutate(E.id)},_=(E,Q)=>{S.mutate({id:E,status:Q})},P=()=>{u(null),h({title:"",slug:"",excerpt:"",content:"",cover_image:"",author_name:"",status:"draft",category:""}),o(!1)},H=[{key:"title",header:"Title",render:E=>d.jsx("div",{className:"font-medium",children:E})},{key:"slug",header:"Slug",render:E=>d.jsx("div",{className:"max-w-xs truncate font-mono text-xs text-emerald/70",children:E})},{key:"status",header:"Status",render:(E,Q)=>d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:`px-2 py-1 rounded-full text-xs ${E==="published"?"bg-emerald/20 text-emerald":"bg-gold/20 text-gold"}`,children:E==="published"?"Published":"Draft"}),d.jsxs(re,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-emerald/70",onClick:()=>_(Q.id,E==="published"?"draft":"published"),children:[d.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),d.jsx("span",{className:"sr-only",children:"Toggle Status"})]})]})},{key:"author_name",header:"Author"}];return d.jsx(Zt,{title:"Manage Articles",children:d.jsxs("div",{className:"space-y-8",children:[d.jsx("div",{className:"mb-8",children:a?d.jsxs("div",{className:"bg-emerald-light rounded-lg border border-gold/20 p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"font-serif text-xl text-gold",children:l?"Edit Article":"Create New Article"}),d.jsx(re,{variant:"ghost",size:"sm",onClick:P,className:"text-white/70 hover:text-white",children:"Cancel"})]}),d.jsx("form",{onSubmit:l?ee:I,children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(G,{htmlFor:"title",className:"text-white",children:"Article Title"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(ae,{id:"title",name:"title",value:c.title,onChange:j,className:"flex-1 bg-emerald-gold/20 border-gold/30 text-black",required:!0}),d.jsx(re,{type:"button",variant:"outline",className:"border-gold/30 text-gold",onClick:T,children:"Generate Slug"})]})]}),d.jsxs("div",{children:[d.jsx(G,{htmlFor:"slug",className:"text-white",children:"Slug"}),d.jsx(ae,{id:"slug",name:"slug",value:c.slug,onChange:j,className:"bg-emerald-gold/20 border-gold/30 text-black font-mono",required:!0})]}),d.jsxs("div",{children:[d.jsx(G,{htmlFor:"author_name",className:"text-white",children:"Author"}),d.jsx(ae,{id:"author_name",name:"author_name",value:c.author_name,onChange:j,className:"bg-emerald-gold/20 border-gold/30 text-black",required:!0})]}),d.jsxs("div",{children:[d.jsx(G,{htmlFor:"category",className:"text-white",children:"Category"}),d.jsx(ae,{id:"category",name:"category",value:c.category,onChange:j,className:"bg-emerald-gold/20 border-gold/30 text-black"})]}),d.jsxs("div",{children:[d.jsx(G,{htmlFor:"cover_image",className:"text-white",children:"Cover Image URL"}),d.jsx(ae,{id:"cover_image",name:"cover_image",value:c.cover_image,onChange:j,className:"bg-emerald-gold/20 border-gold/30 text-black",placeholder:"https://example.com/image.jpg",required:!0})]}),d.jsxs("div",{children:[d.jsx(G,{htmlFor:"excerpt",className:"text-white",children:"Excerpt"}),d.jsx("textarea",{id:"excerpt",name:"excerpt",value:c.excerpt,onChange:j,className:"w-full rounded-md bg-emerald-gold/20 border-gold/30 text-black h-20 px-3 py-2",required:!0})]}),d.jsxs("div",{children:[d.jsx(G,{htmlFor:"content",className:"text-white",children:"Content"}),d.jsx("textarea",{id:"content",name:"content",value:c.content,onChange:j,className:"w-full rounded-md bg-emerald-gold/20 border-gold/30 text-black h-72 px-3 py-2 font-mono text-sm",required:!0})]}),d.jsxs("div",{children:[d.jsx(G,{htmlFor:"status",className:"text-white",children:"Status"}),d.jsxs("div",{className:"flex gap-4 mt-2",children:[d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"radio",name:"status",value:"draft",checked:c.status==="draft",onChange:j,className:"mr-2"}),d.jsx("span",{className:"text-white/80",children:"Draft"})]}),d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"radio",name:"status",value:"published",checked:c.status==="published",onChange:j,className:"mr-2"}),d.jsx("span",{className:"text-white/80",children:"Published"})]})]})]}),d.jsx("div",{className:"flex gap-4 pt-2",children:d.jsx(re,{type:"submit",className:"bg-gold text-black hover:bg-gold/90",disabled:x.isPending||v.isPending,children:x.isPending||v.isPending?d.jsxs("div",{className:"flex items-center",children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):l?"Update Article":"Create Article"})})]})})]}):d.jsxs(re,{onClick:()=>o(!0),className:"bg-gold text-black hover:bg-gold/90",children:[d.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Write New Article"]})}),d.jsxs("div",{children:[d.jsx("h2",{className:"font-serif text-xl text-gold mb-4",children:"All Articles"}),d.jsx(Or,{columns:H,data:(p==null?void 0:p.data)||[],onEdit:oe,onDelete:N,isLoading:y})]})]})})},Ns=g.forwardRef(({className:r,...e},t)=>d.jsx("div",{ref:t,className:le("rounded-lg border bg-card text-card-foreground shadow-sm",r),...e}));Ns.displayName="Card";const Ps=g.forwardRef(({className:r,...e},t)=>d.jsx("div",{ref:t,className:le("flex flex-col space-y-1.5 p-6",r),...e}));Ps.displayName="CardHeader";const Rs=g.forwardRef(({className:r,...e},t)=>d.jsx("h3",{ref:t,className:le("text-2xl font-semibold leading-none tracking-tight",r),...e}));Rs.displayName="CardTitle";const nd=g.forwardRef(({className:r,...e},t)=>d.jsx("p",{ref:t,className:le("text-sm text-muted-foreground",r),...e}));nd.displayName="CardDescription";const Os=g.forwardRef(({className:r,...e},t)=>d.jsx("div",{ref:t,className:le("p-6 pt-0",r),...e}));Os.displayName="CardContent";const id=g.forwardRef(({className:r,...e},t)=>d.jsx("div",{ref:t,className:le("flex items-center p-6 pt-0",r),...e}));id.displayName="CardFooter";const ad=({getAllProducts:r,getAllArticles:e,getGalleryItems:t,getTestimonials:s})=>{const[n,i]=R.useState({products:0,articles:0,gallery:0,testimonials:0}),{data:a,isSuccess:o}=qe({queryKey:["admin-products"],queryFn:r}),{data:l,isSuccess:u}=qe({queryKey:["admin-articles"],queryFn:e}),{data:c,isSuccess:h}=qe({queryKey:["admin-gallery"],queryFn:t}),{data:m,isSuccess:p}=qe({queryKey:["admin-testimonials"],queryFn:s});R.useEffect(()=>{const v={...n};o&&a.data&&(v.products=a.data.length),u&&l.data&&(v.articles=l.data.length),h&&c.data&&(v.gallery=c.data.length),p&&m.data&&(v.testimonials=m.data.length),i(v)},[o,u,h,p,a,l,c,m]);const y=[{title:"Products",value:n.products,icon:"box",link:"/admin/products",color:"bg-gradient-to-br from-emerald to-emerald-light"},{title:"Articles",value:n.articles,icon:"file-text",link:"/admin/articles",color:"bg-gradient-to-br from-burgundy to-burgundy-light"},{title:"Gallery Items",value:n.gallery,icon:"image",link:"/admin/gallery",color:"bg-gradient-to-br from-emerald-light to-emerald"},{title:"Testimonials",value:n.testimonials,icon:"message-square",link:"/admin/testimonials",color:"bg-gradient-to-br from-gold to-gold-light"}],x=[{title:"Add New Product",description:"Create a new product in your catalogue",icon:"plus-circle",link:"/admin/products"},{title:"Write New Article",description:"Share your expertise with a new article",icon:"edit",link:"/admin/articles"},{title:"Add Gallery Item",description:"Upload a new image to your gallery",icon:"upload",link:"/admin/gallery"},{title:"Record Testimonial",description:"Add a new customer testimonial",icon:"star",link:"/admin/testimonials"}];return d.jsx(Zt,{title:"Admin Dashboard",children:d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"bg-emerald p-6 rounded-lg shadow-lg border border-white/10 mb-8",children:[d.jsx("h2",{className:"font-serif text-2xl text-gold mb-2",children:"Welcome to Velour Essence Admin"}),d.jsx("p",{className:"text-white/80",children:"Manage your luxury fragrance brand content from this central dashboard. Select a section below to begin editing your site's content."})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:y.map((v,k)=>d.jsx(Ze,{to:v.link,className:"transition-transform hover:scale-105",children:d.jsxs(Ns,{className:`border-0 shadow-lg ${v.color} text-white`,children:[d.jsx(Ps,{className:"pb-2",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(Rs,{className:"text-lg font-serif",children:v.title}),d.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:d.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[v.icon==="box"&&d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0v10a2 2 0 01-2 2H6a2 2 0 01-2-2V7m16 0l-8 4m-8-4l8 4"}),v.icon==="file-text"&&d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}),v.icon==="image"&&d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}),v.icon==="message-square"&&d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})]})})]})}),d.jsxs(Os,{children:[d.jsx("div",{className:"text-3xl font-bold",children:v.value}),d.jsxs("p",{className:"text-sm text-white/70 mt-1",children:["Total ",v.title.toLowerCase()]})]})]})},k))}),d.jsxs("div",{className:"mt-12 space-y-4",children:[d.jsx("h2",{className:"font-serif text-xl text-gold mb-4",children:"Quick Actions"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:x.map((v,k)=>d.jsx(Ze,{to:v.link,className:"transition-transform hover:scale-105",children:d.jsxs(Ns,{className:"bg-emerald-light border border-gold/10 shadow-lg",children:[d.jsx(Ps,{className:"pb-2",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(Rs,{className:"text-md font-serif text-gold",children:v.title}),d.jsx("div",{className:"bg-gold/20 text-gold p-2 rounded-full",children:d.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[v.icon==="plus-circle"&&d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}),v.icon==="edit"&&d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"}),v.icon==="upload"&&d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"}),v.icon==="star"&&d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})]})})]})}),d.jsx(Os,{children:d.jsx("p",{className:"text-sm text-white/70",children:v.description})})]})},k))})]}),d.jsx("div",{className:"py-6 text-center",children:d.jsxs(Ze,{to:"/",className:"text-gold hover:text-gold-light flex items-center justify-center",children:[d.jsx("span",{children:"View your website"}),d.jsx("svg",{className:"ml-2 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]})})};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$i=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ld={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=R.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:n="",children:i,iconNode:a,...o},l)=>R.createElement("svg",{ref:l,...ld,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:$i("lucide",n),...o},[...a.map(([u,c])=>R.createElement(u,c)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=(r,e)=>{const t=R.forwardRef(({className:s,...n},i)=>R.createElement(cd,{ref:i,iconNode:e,className:$i(`lucide-${od(r)}`,s),...n}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=ud("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),dd=({query:r})=>{const{getTestimonials:e,createTestimonial:t,updateTestimonial:s,deleteTestimonial:n}=r,[i,a]=R.useState(!1),[o,l]=R.useState(null),[u,c]=R.useState({parent_name:"",testimonial:"",rating:5,avatar_url:"",is_featured:!1,child_name:null,child_age:null}),h=Et(),{data:m,isLoading:p}=qe({queryKey:["admin-testimonials"],queryFn:e}),y=be({mutationFn:t,onSuccess:()=>{h.invalidateQueries({queryKey:["admin-testimonials"]}),B({title:"Testimonial created successfully"}),oe()},onError:_=>{console.error("Failed to create testimonial:",_),B({title:"Error",description:"Failed to create testimonial. Please try again.",variant:"destructive"})}}),x=be({mutationFn:({id:_,updates:P})=>s(_,P),onSuccess:()=>{h.invalidateQueries({queryKey:["admin-testimonials"]}),B({title:"Testimonial updated successfully"}),oe()},onError:_=>{console.error("Failed to update testimonial:",_),B({title:"Error",description:"Failed to update testimonial. Please try again.",variant:"destructive"})}}),v=be({mutationFn:n,onSuccess:()=>{h.invalidateQueries({queryKey:["admin-testimonials"]}),B({title:"Testimonial deleted successfully"})},onError:_=>{console.error("Failed to delete testimonial:",_),B({title:"Error",description:"Failed to delete testimonial. Please try again.",variant:"destructive"})}}),k=_=>{const{name:P,value:H,type:E}=_.target;c(E==="checkbox"?{...u,[P]:_.target.checked}:E==="number"?{...u,[P]:H===""?null:Number(H)}:{...u,[P]:H})},S=_=>{c({...u,rating:_})},j=_=>{_.preventDefault(),y.mutate(u)},T=_=>{_.preventDefault(),o&&x.mutate({id:o.id,updates:u})},I=_=>{l(_),c({parent_name:_.parent_name,testimonial:_.testimonial,rating:_.rating,avatar_url:_.avatar_url||"",is_featured:_.is_featured||!1,child_name:_.child_name,child_age:_.child_age}),a(!0),window.scrollTo({top:0,behavior:"smooth"})},ee=_=>{confirm("Are you sure you want to delete this testimonial?")&&v.mutate(_.id)},oe=()=>{l(null),c({parent_name:"",testimonial:"",rating:5,avatar_url:"",is_featured:!1,child_name:null,child_age:null}),a(!1)},N=[{key:"parent_name",header:"Name",render:(_,P)=>d.jsxs("div",{children:[d.jsx("div",{className:"font-medium",children:_}),P.child_name&&d.jsxs("div",{className:"text-xs text-white/60",children:["Child: ",P.child_name,", ",P.child_age," y.o."]})]})},{key:"testimonial",header:"Testimonial",render:_=>d.jsx("div",{className:"max-w-xs truncate",children:_})},{key:"rating",header:"Rating",render:_=>d.jsx("div",{className:"flex",children:[...Array(5)].map((P,H)=>d.jsx(Ii,{className:`h-4 w-4 ${H<_?"text-gold fill-gold":"text-gray-300"}`},H))})},{key:"is_featured",header:"Featured",render:_=>d.jsx("div",{className:_?"text-gold":"text-white/40",children:_?d.jsx("svg",{className:"w-5 h-5 fill-current",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}):"—"})}];return d.jsx(Zt,{title:"Manage Testimonials",children:d.jsxs("div",{className:"space-y-8",children:[d.jsx("div",{className:"mb-8",children:i?d.jsxs("div",{className:"bg-emerald-light rounded-lg border border-gold/20 p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"font-serif text-xl text-gold",children:o?"Edit Testimonial":"Add New Testimonial"}),d.jsx(re,{variant:"ghost",size:"sm",onClick:oe,className:"text-white/70 hover:text-white",children:"Cancel"})]}),d.jsx("form",{onSubmit:o?T:j,children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(G,{htmlFor:"parent_name",className:"text-white",children:"Name"}),d.jsx(ae,{id:"parent_name",name:"parent_name",value:u.parent_name,onChange:k,className:"bg-emerald-gold/20 border-gold/30 text-black",required:!0})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx(G,{htmlFor:"child_name",className:"text-white",children:"Child's Name (Optional)"}),d.jsx(ae,{id:"child_name",name:"child_name",value:u.child_name||"",onChange:k,className:"bg-emerald-gold/20 border-gold/30 text-black"})]}),d.jsxs("div",{children:[d.jsx(G,{htmlFor:"child_age",className:"text-white",children:"Child's Age (Optional)"}),d.jsx(ae,{id:"child_age",name:"child_age",type:"number",value:u.child_age!==null?u.child_age:"",onChange:k,className:"bg-emerald-gold/20 border-gold/30 text-black",min:"0",max:"100"})]})]}),d.jsxs("div",{children:[d.jsx(G,{htmlFor:"testimonial",className:"text-white",children:"Testimonial"}),d.jsx("textarea",{id:"testimonial",name:"testimonial",value:u.testimonial,onChange:k,className:"w-full rounded-md bg-emerald-gold/20 border-gold/30 text-black h-24 px-3 py-2",required:!0})]}),d.jsxs("div",{children:[d.jsx(G,{htmlFor:"rating",className:"text-white",children:"Rating"}),d.jsx("div",{className:"flex mt-2",children:[...Array(5)].map((_,P)=>d.jsx(Ii,{className:`h-6 w-6 cursor-pointer ${P<u.rating?"text-gold fill-gold":"text-white-500"}`,onClick:()=>S(P+1)},P))})]}),d.jsxs("div",{children:[d.jsx(G,{htmlFor:"avatar_url",className:"text-white",children:"Avatar URL (Optional)"}),d.jsx(ae,{id:"avatar_url",name:"avatar_url",value:u.avatar_url||"",onChange:k,className:"bg-emerald-gold/20 border-gold/30 text-black",placeholder:"https://example.com/avatar.jpg"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"is_featured",name:"is_featured",checked:u.is_featured||!1,onChange:k,className:"w-4 h-4 mr-2"}),d.jsx(G,{htmlFor:"is_featured",className:"text-white",children:"Featured testimonial"})]}),d.jsx("div",{className:"flex gap-4 pt-2",children:d.jsx(re,{type:"submit",className:"bg-gold text-black hover:bg-gold/90",disabled:y.isPending||x.isPending,children:y.isPending||x.isPending?d.jsxs("div",{className:"flex items-center",children:[d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):o?"Update Testimonial":"Create Testimonial"})})]})})]}):d.jsxs(re,{onClick:()=>a(!0),className:"bg-gold text-black hover:bg-gold/90",children:[d.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add New Testimonial"]})}),d.jsxs("div",{children:[d.jsx("h2",{className:"font-serif text-xl text-gold mb-4",children:"All Testimonials"}),d.jsx(Or,{columns:N,data:(m==null?void 0:m.data)||[],onEdit:I,onDelete:ee,isLoading:p})]})]})})},rr=({children:r,getCurrentSession:e})=>{const[t,s]=R.useState(null),[n,i]=R.useState(!0);return R.useEffect(()=>{(async()=>{const{data:o}=await e();o&&o.session&&s(o.session),i(!1)})()},[]),n?d.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background",children:d.jsx("div",{className:"w-16 h-16 border-4 border-gold border-t-transparent rounded-full animate-spin"})}):t?d.jsx(d.Fragment,{children:r}):d.jsx(Ja,{to:"/auth/login",replace:!0})},hd=({config:r,children:e})=>{const t=Cc(r.projectId,r.supabaseUrl,r.supabaseKey);return d.jsx(Yu,{config:r,logout:t.auth.logout,children:d.jsxs(Qa,{children:[e,d.jsx(Xe,{path:"/auth/login",element:d.jsx(ju,{loginWithEmailPassword:t.auth.loginWithEmailPassword})}),d.jsx(Xe,{path:"/admin",element:d.jsx(rr,{getCurrentSession:t.auth.getCurrentSession,children:d.jsx(ad,{getAllArticles:t.articles.getAllArticles,getAllProducts:t.products.getAllProducts,getGalleryItems:t.gallery.getGalleryItems,getTestimonials:t.testimonials.getTestimonials})})}),d.jsx(Xe,{path:"/admin/products",element:d.jsx(rr,{getCurrentSession:t.auth.getCurrentSession,children:d.jsx(rd,{query:t.products})})}),d.jsx(Xe,{path:"/admin/articles",element:d.jsx(rr,{getCurrentSession:t.auth.getCurrentSession,children:d.jsx(sd,{query:t.articles})})}),d.jsx(Xe,{path:"/admin/gallery",element:d.jsx(rr,{getCurrentSession:t.auth.getCurrentSession,children:d.jsx(td,{query:t.gallery})})}),d.jsx(Xe,{path:"/admin/testimonials",element:d.jsx(rr,{getCurrentSession:t.auth.getCurrentSession,children:d.jsx(dd,{query:t.testimonials})})})]})})};var As,Di;function fd(){return Di||(Di=1,As=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}),As}var md=fd();const pd=Object.freeze(Object.defineProperty({__proto__:null,default:Ys(md)},Symbol.toStringTag,{value:"Module"}));Y.AdminKit=hd,Object.defineProperty(Y,Symbol.toStringTag,{value:"Module"})});
